<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Getting Started &mdash; Gcloud Documentation</title>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/gcloud-ruby/css/normalize.css">
<link rel="stylesheet" href="/gcloud-ruby/css/main.css">
<script src="/gcloud-ruby/js/vendor/modernizr-2.6.2.min.js"></script>
<link href='//fonts.googleapis.com/css?family=Droid+Sans+Mono|Roboto:300,400,700,700italic,400italic|Open+Sans:300' rel='stylesheet' type='text/css'>
<link rel="shortcut icon" href="https://cloud.google.com/images/gcp-favicon.ico">

  </head>

  <body class="lang-page">
    <!--[if lt IE 7]>
  <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

<header class="page-header fixed" role="banner">
  <h1 class="logo">
    <a href="/gcloud-ruby/" title="back to home">
      <img src="/gcloud-ruby/img/logo.svg" alt="Google Cloud Platform">
      <span class="gcloud">gcloud</span>
    </a>
  </h1>

  <nav class="main-nav">
    <div class="nav-current">Ruby</div>
    <ul class="menu">
      <li>
        <a href="/gcloud-node/" title="gcloud-node">
          <img src="/gcloud-ruby/img/icon-lang-nodejs.svg" alt="Node.js icon" class="menu-icon">
          Node.js
        </a>
      </li>
      <li>
        <a href="/gcloud-python/" title="gcloud-python">
          <img src="/gcloud-ruby/img/icon-lang-python.svg" alt="Python icon" class="menu-icon">
          Python
        </a>
      </li>
      <li>
        <a href="/gcloud-ruby/" title="gcloud-ruby">
          <img src="/gcloud-ruby/img/icon-lang-ruby.svg" alt="Ruby icon" class="menu-icon" width="24">
          Ruby
        </a>
      </li>
    </ul>
  </nav>
</header>


    <article class="main lang-page" role="main">

      <header class="docs-header">
        <h1 class="page-title">Getting Started</h1>
        <div class="buttons">
  <a href="/gcloud-ruby/docs/versions" class="v-btn">
    <img src="/gcloud-ruby/img/icon-arrow-bullet.svg" />
    Version History
  </a>
  <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/new?title=%5BDocumentation+Issue%5D+" target="_blank" class="v-btn">
    <img src="/gcloud-ruby/img/icon-link-github.svg" />
    Report an Issue
  </a>
</div>

      </header>

      <section class="content">
        
<h1 id="label-Getting+started">Getting started<span><a href="#label-Getting+started">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>The <code>gcloud</code> library is installable through rubygems:</p>

<pre>$ gem install gcloud</pre>

<h1 id="label-Authentication">Authentication<span><a href="#label-Authentication">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p><a href="../Gcloud.html">Gcloud</a> uses Service Account credentials to
connect to Google Cloud services. When running on Compute Engine the
credentials will be discovered automatically. When running on other
environments the Service Account credentials can be specified by providing
the path to the JSON file, or the JSON itself, in environment variables.
Additionally, Cloud SDK credentials can also be discovered automatically,
but this is only recommended during development.</p>

<h2 id="label-Creating+a+Service+Account">Creating a Service Account<span><a href="#label-Creating+a+Service+Account">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="../Gcloud.html">Gcloud</a> aims to make authentication as simple
as possible. Google Cloud requires a <strong>Project ID</strong> and
<strong>Service Account Credentials</strong> to connect to the APIs. To
create a service account:</p>
<ol><li>
<p>Visit the <a href="https://console.developers.google.com/project">Google
Developers Console</a>.</p>
</li><li>
<p>Create a new project or click on an existing project.</p>
</li><li>
<p>Navigate to <strong>APIs &amp; auth</strong> &gt; <strong>APIs
section</strong> and turn on the following APIs (you may need to enable
billing in order to use these services):</p>
</li><li>
<p>Google Cloud Datastore API</p>
</li><li>
<p>Google Cloud Storage</p>
</li><li>
<p>Google Cloud Storage JSON API</p>
</li><li>
<p>Navigate to <strong>APIs &amp; auth</strong> &gt;
<strong>Credentials</strong> and then:</p>
</li><li>
<p>If you want to use a new service account, click on <strong>Create new
Client ID</strong> and select <strong>Service account</strong>. After the
account is created, you will be prompted to download the JSON key file that
the library uses to authorize your requests.</p>
</li><li>
<p>If you want to generate a new key for an existing service account, click on
<strong>Generate new JSON key</strong> and download the JSON key file.</p>
</li></ol>

<p>You will use the <strong>Project ID</strong> and <strong>JSON file</strong>
to connect to services with gcloud.</p>

<h2 id="label-Project+and+Credential+Lookup">Project and Credential Lookup<span><a href="#label-Project+and+Credential+Lookup">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="../Gcloud.html">Gcloud</a> aims to make authentication as simple
as possible, and provides several mechanisms to configure your system
without providing <strong>Project ID</strong> and <strong>Service Account
Credentials</strong> directly in code.</p>

<p><strong>Project ID</strong> is discovered in the following order:</p>
<ol><li>
<p>Specify project ID in code</p>
</li><li>
<p>Discover project ID in environment variables</p>
</li><li>
<p>Discover GCE project ID</p>
</li></ol>

<p><strong>Credentials</strong> are discovered in the following order:</p>
<ol><li>
<p>Specify credentials in code</p>
</li><li>
<p>Discover credentials path in environment variables</p>
</li><li>
<p>Discover credentials JSON in environment variables</p>
</li><li>
<p>Discover credentials file in the Cloud SDK&#39;s path</p>
</li><li>
<p>Discover GCE credentials</p>
</li></ol>

<h3 id="label-Compute+Engine">Compute Engine<span><a href="#label-Compute+Engine">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>While running on Google Compute Engine no extra work is needed. The
<strong>Project ID</strong> and <strong>Credentials</strong> and are
discovered automatically. Code should be written as if already
authenticated.</p>

<h3 id="label-Environment+Variables">Environment Variables<span><a href="#label-Environment+Variables">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>The <strong>Project ID</strong> and <strong>Credentials JSON</strong> can
be placed in environment variables instead of declaring them directly in
code. Each service has its own environment variable, allowing for different
service accounts to be used for different services. The path to the
<strong>Credentials JSON</strong> file can be stored in the environment
variable, or the <strong>Credentials JSON</strong> itself can be stored for
environments such as Docker containers where writing files is difficult or
not encouraged.</p>

<p>Here are the environment variables that Datastore checks for project ID:</p>
<ol><li>
<p>DATASTORE_PROJECT</p>
</li><li>
<p>GOOGLE_CLOUD_PROJECT</p>
</li></ol>

<p>Here are the environment variables that Datastore checks for credentials:</p>
<ol><li>
<p>DATASTORE_KEYFILE - Path to JSON file</p>
</li><li>
<p>GOOGLE_CLOUD_KEYFILE - Path to JSON file</p>
</li><li>
<p>DATASTORE_KEYFILE_JSON - JSON contents</p>
</li><li>
<p>GOOGLE_CLOUD_KEYFILE_JSON - JSON contents</p>
</li></ol>

<h3 id="label-Cloud+SDK">Cloud SDK<span><a href="#label-Cloud+SDK">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>This option allows for an easy way to authenticate during development. If
credentials are not provided in code or in environment variables, then
Cloud SDK credentials are discovered.</p>

<p>To configure your system for this, simply:</p>
<ol><li>
<p><a href="https://cloud.google.com/sdk">Download and install the Cloud
SDK</a></p>
</li><li>
<p>Authenticate using OAuth2 <code>$ gcloud auth login</code></p>
</li><li>
<p>Write code as if already authenticated.</p>
</li></ol>

<p><strong>NOTE:</strong> This is <em>not</em> recommended for running in
production. The Cloud SDK should only be used during development.</p>

<h2 id="label-Troubleshooting">Troubleshooting<span><a href="#label-Troubleshooting">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>If you&#39;re having trouble authenticating open a <a
href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/new?title=Authentication+question">Github
Issue</a> to get help. Also consider searching or asking <a
href="http://stackoverflow.com/questions/tagged/gcloud-ruby">questions</a>
on <a href="http://stackoverflow.com">StackOverflow</a>.</p>

<h1 id="label-Datastore">Datastore<span><a href="#label-Datastore">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p><a href="https://cloud.google.com/datastore/">Google Cloud Datastore</a>
(<a href="https://cloud.google.com/datastore/docs">docs</a>) is a fully
managed, schemaless database for storing non-relational data. Cloud
Datastore automatically scales with your users and supports ACID
transactions, high availability of reads and writes, strong consistency for
reads and ancestor queries, and eventual consistency for all other queries.</p>

<p>Follow the <a
href="https://cloud.google.com/datastore/docs/activate">activation
instructions</a> to use the Google Cloud Datastore API with your project.</p>

<p>See the <a
href="http://googlecloudplatform.github.io/gcloud-ruby/docs/master/Gcloud/Storage.html">gcloud-ruby
Datastore API documentation</a> to learn how to interact with the Cloud
Datastore using this library.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;gcloud/datastore&#39;</span>

<span class="ruby-identifier">dataset</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">datastore</span> <span class="ruby-string">&quot;my-todo-project-id&quot;</span>,
                           <span class="ruby-string">&quot;/path/to/keyfile.json&quot;</span>

<span class="ruby-comment"># Create a new task to demo datastore</span>
<span class="ruby-identifier">demo_task</span> = <span class="ruby-constant">Gcloud</span><span class="ruby-operator">::</span><span class="ruby-constant">Datastore</span><span class="ruby-operator">::</span><span class="ruby-constant">Entity</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">demo_task</span>.<span class="ruby-identifier">key</span> = <span class="ruby-constant">Gcloud</span><span class="ruby-operator">::</span><span class="ruby-constant">Datastore</span><span class="ruby-operator">::</span><span class="ruby-constant">Key</span>.<span class="ruby-identifier">new</span> <span class="ruby-string">&quot;Task&quot;</span>, <span class="ruby-string">&quot;datastore-demo&quot;</span>
<span class="ruby-identifier">demo_task</span>[:<span class="ruby-identifier">description</span>] = <span class="ruby-string">&quot;Demonstrate Datastore functionality&quot;</span>
<span class="ruby-identifier">demo_task</span>[:<span class="ruby-identifier">completed</span>] = <span class="ruby-keyword">false</span>

<span class="ruby-comment"># Save the new task</span>
<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">save</span> <span class="ruby-identifier">demo_task</span>

<span class="ruby-comment"># Run a query for all completed tasks</span>
<span class="ruby-identifier">query</span> = <span class="ruby-constant">Gcloud</span><span class="ruby-operator">::</span><span class="ruby-constant">Datastore</span><span class="ruby-operator">::</span><span class="ruby-constant">Query</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">kind</span>(<span class="ruby-string">&quot;Task&quot;</span>).
  <span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;completed&quot;</span>, <span class="ruby-string">&quot;=&quot;</span>, <span class="ruby-keyword">true</span>)
<span class="ruby-identifier">completed_tasks</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">run</span> <span class="ruby-identifier">query</span>
</pre>

<h1 id="label-Storage">Storage<span><a href="#label-Storage">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p><a href="https://cloud.google.com/storage/">Google Cloud Storage</a> (<a
href="https://cloud.google.com/storage/docs/json_api/">docs</a>) allows you
to store data on Google infrastructure with very high reliability,
performance and availability, and can be used to distribute large data
objects to users via direct download.</p>

<p>See the <a
href="http://googlecloudplatform.github.io/gcloud-ruby/docs/master/Gcloud/Storage.html">gcloud-ruby
Storage API documentation</a> to learn how to connect to Cloud Storage
using this library.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;gcloud/storage&#39;</span>

<span class="ruby-identifier">storage</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">storage</span> <span class="ruby-string">&quot;my-todo-project-id&quot;</span>,
                         <span class="ruby-string">&quot;/path/to/keyfile.json&quot;</span>

<span class="ruby-identifier">bucket</span> = <span class="ruby-identifier">storage</span>.<span class="ruby-identifier">bucket</span> <span class="ruby-string">&quot;task-attachments&quot;</span>

<span class="ruby-identifier">file</span> = <span class="ruby-identifier">bucket</span>.<span class="ruby-identifier">file</span> <span class="ruby-string">&quot;path/to/my-file.ext&quot;</span>

<span class="ruby-comment"># Download the file to the local file system</span>
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">download</span> <span class="ruby-node">&quot;/tasks/attachments/#{file.name}&quot;</span>

<span class="ruby-comment"># Copy the file to a backup bucket</span>
<span class="ruby-identifier">backup</span> = <span class="ruby-identifier">storage</span>.<span class="ruby-identifier">bucket</span> <span class="ruby-string">&quot;task-attachment-backups&quot;</span>
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">copy</span> <span class="ruby-identifier">backup</span>, <span class="ruby-identifier">file</span>.<span class="ruby-identifier">name</span>
</pre>

      </section>

      <nav class="side-nav">
        <div class="side-nav--meta">
  <div id="doc-build-date">
    Docs built on Jun 17, 2015.
  </div>
</div>

<ul>
  <li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
</ul>

<ul>

    <li class="toctree-l1" style="padding-left: 0em;">
      <a class="reference internal" href="../Gcloud.html">
        Gcloud
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 0em;">
      <a class="reference internal" href="../Gcloud/Datastore.html">
        Datastore
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 2em;">
      <a class="reference internal" href="../Gcloud/Datastore/Dataset.html">
        Dataset
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 2em;">
      <a class="reference internal" href="../Gcloud/Datastore/Query.html">
        Query
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 2em;">
      <a class="reference internal" href="../Gcloud/Datastore/Entity.html">
        Entity
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 2em;">
      <a class="reference internal" href="../Gcloud/Datastore/Key.html">
        Key
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 0em;">
      <a class="reference internal" href="../Gcloud/Pubsub.html">
        Pubsub
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 2em;">
      <a class="reference internal" href="../Gcloud/Pubsub/Project.html">
        Project
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 2em;">
      <a class="reference internal" href="../Gcloud/Pubsub/Topic.html">
        Topic
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 2em;">
      <a class="reference internal" href="../Gcloud/Pubsub/Subscription.html">
        Subscription
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 0em;">
      <a class="reference internal" href="../Gcloud/Storage.html">
        Storage
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 2em;">
      <a class="reference internal" href="../Gcloud/Storage/Project.html">
        Project
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 2em;">
      <a class="reference internal" href="../Gcloud/Storage/Bucket.html">
        Bucket
      </a>
    </li>

    <li class="toctree-l1" style="padding-left: 2em;">
      <a class="reference internal" href="../Gcloud/Storage/File.html">
        File
      </a>
    </li>

  <li class="toctree-l1"><a class="reference internal" href="../reference.html">API Reference</a></li>

</ul>

<ul class="external-links">
  <li>
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby" title="Github repository">
      <img src="/gcloud-ruby/img/icon-link-github.svg" alt="Github icon">
      Github
    </a>
  </li>
  <li>
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues" title="Issues on Github">
      <img src="/gcloud-ruby/img/icon-link-github.svg" alt="Github icon">
      Issues
    </a>
  </li>
  <li>
    <a href="http://stackoverflow.com/questions/tagged/gcloud-ruby" title="gcloud on StackOverflow">
      <img src="/gcloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon">
      StackOverflow
    </a>
  </li>
  <li>
    <a href="http://rubygems.org/gems/gcloud" title="RubyGems" class="ext-link">
       <img src="/gcloud-ruby/img/icon-link-package-manager.svg" alt="Package Manager icon">
      RubyGems
    </a>
  </li>
</ul>

      </nav>

    </article>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script ="/gcloud-ruby/js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="/gcloud-ruby/js/plugins.js"></script>
<script src="/gcloud-ruby/js/main.js"></script>

<script>
  (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-49880327-13');ga('send','pageview');
</script>


  </body>
</html>
