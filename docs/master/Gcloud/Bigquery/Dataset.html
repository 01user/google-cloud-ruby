<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Gcloud::Bigquery::Dataset &mdash; Gcloud Documentation</title>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/gcloud-ruby/css/normalize.css">
<link rel="stylesheet" href="/gcloud-ruby/css/main.css">
<script src="/gcloud-ruby/js/vendor/modernizr-2.6.2.min.js"></script>
<link href='//fonts.googleapis.com/css?family=Droid+Sans+Mono|Roboto:300,400,700,700italic,400italic|Open+Sans:300' rel='stylesheet' type='text/css'>
<link rel="shortcut icon" href="https://cloud.google.com/images/gcp-favicon.ico">

  </head>

  <body class="lang-page">
    <!--[if lt IE 7]>
  <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

<header class="page-header fixed" role="banner">
  <h1 class="logo">
    <a href="/gcloud-ruby/" title="back to home">
      <img src="/gcloud-ruby/img/logo.svg" alt="Google Cloud Platform">
      <span class="gcloud">gcloud</span>
    </a>
  </h1>

  <nav class="main-nav">
    <div class="nav-current">Ruby</div>
    <ul class="menu">
      <li>
        <a href="/gcloud-java/" title="gcloud-java">
          <img src="/gcloud-ruby/img/icon-lang-java.svg" alt="Java icon" class="menu-icon" />
          Java
        </a>
      </li>
      <li>
        <a href="/gcloud-node/#/docs" title="gcloud-node">
          <img src="/gcloud-ruby/img/icon-lang-nodejs.svg" alt="Node.js icon" class="menu-icon">
          Node.js
        </a>
      </li>
      <li>
        <a href="/gcloud-python/latest/" title="gcloud-python">
          <img src="/gcloud-ruby/img/icon-lang-python.svg" alt="Python icon" class="menu-icon">
          Python
        </a>
      </li>
      <li>
        <a href="/gcloud-ruby/" title="gcloud-ruby">
          <img src="/gcloud-ruby/img/icon-lang-ruby.svg" alt="Ruby icon" class="menu-icon" width="24">
          Ruby
        </a>
      </li>
    </ul>
  </nav>

  <div class="github-issue">
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/new?title=%5BDocumentation+Issue%5D+" target="_blank" class="v-btn">
      <img src="/gcloud-ruby/img/icon-link-github.svg" />
      Report an Issue
    </a>
  </div>
</header>


    <article class="main lang-page" role="main">

      <header class="docs-header">
        <h1 class="page-title">Gcloud::Bigquery::Dataset</h1>
      </header>

      <section class="content">

        <div id="description" class="description">
          
<h1 id="class-Gcloud::Bigquery::Dataset-label-Dataset"><a href="Dataset.html">Dataset</a><span><a href="#class-Gcloud::Bigquery::Dataset-label-Dataset">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>Represents a <a href="Dataset.html">Dataset</a>. A dataset is a grouping
mechanism that holds zero or more tables. Datasets are the lowest level
unit of access control; you cannot control access at the table level. A
dataset is contained within a specific project.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>

<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">create_dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>,
                                  <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;My Dataset&quot;</span>,
                                  <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;This is my Dataset&quot;</span>
</pre>

        </div>

        <div class="section-links">
  
    <div>
      Parent:
      
        Object
      
    </div>
  

  

  
    
      <div>
         Methods:

        
        

        
        
            
              <a href="#method-i-access">access</a>
            
              <a href="#method-i-access-3D">access=</a>
            
          
        

      </div>
    
  
    
      <div>
        Attributes Methods:

        
        

        
        
            
              <a href="#method-i-created_at">created_at</a>
            
              <a href="#method-i-dataset_id">dataset_id</a>
            
              <a href="#method-i-default_expiration">default_expiration</a>
            
              <a href="#method-i-default_expiration-3D">default_expiration=</a>
            
              <a href="#method-i-description">description</a>
            
              <a href="#method-i-description-3D">description=</a>
            
              <a href="#method-i-etag">etag</a>
            
              <a href="#method-i-location">location</a>
            
              <a href="#method-i-modified_at">modified_at</a>
            
              <a href="#method-i-name">name</a>
            
              <a href="#method-i-name-3D">name=</a>
            
              <a href="#method-i-project_id">project_id</a>
            
              <a href="#method-i-url">url</a>
            
          
        

      </div>
    
  
    
      <div>
        Data Methods:

        
        

        
        
            
              <a href="#method-i-query">query</a>
            
              <a href="#method-i-query_job">query_job</a>
            
          
        

      </div>
    
  
    
      <div>
        Lifecycle Methods:

        
        

        
        
            
              <a href="#method-i-delete">delete</a>
            
          
        

      </div>
    
  
    
      <div>
        Table Methods:

        
        

        
        
            
              <a href="#method-i-create_table">create_table</a>
            
              <a href="#method-i-create_view">create_view</a>
            
              <a href="#method-i-table">table</a>
            
              <a href="#method-i-tables">tables</a>
            
          
        

      </div>
    
  
</div>


        
          
            <h2 id="5Buntitled-5D"> Methods</h2>












    <div id="public-instance-methods" class="section">
      <h3 class="section-header">Public Instance Methods</h3>

      <div class="methods">
        
          <div id="access-method" class="method ">
  <a name="method-i-access"></a>

  
    <h4>
      <code>access()</code>
      <span>
        <a href="#method-i-access">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Retrieves the access rules for a <a href="Dataset.html">Dataset</a> using
the Google Cloud <a href="../Datastore.html">Datastore</a> API data
structure of an array of hashes. The rules can be updated when passing a
block, see <a href="Dataset/Access.html">Dataset::Access</a> for all the
methods available. See <a
href="https://cloud.google.com/bigquery/access-control">BigQuery Access
Control</a> for more information.</p>

<h3 id="method-i-access-label-Examples">Examples<span><a href="#method-i-access-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>

<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">access</span> <span class="ruby-comment">#=&gt; [{&quot;role&quot;=&gt;&quot;OWNER&quot;,</span>
               <span class="ruby-comment">#     &quot;specialGroup&quot;=&gt;&quot;projectOwners&quot;},</span>
               <span class="ruby-comment">#    {&quot;role&quot;=&gt;&quot;WRITER&quot;,</span>
               <span class="ruby-comment">#     &quot;specialGroup&quot;=&gt;&quot;projectWriters&quot;},</span>
               <span class="ruby-comment">#    {&quot;role&quot;=&gt;&quot;READER&quot;,</span>
               <span class="ruby-comment">#     &quot;specialGroup&quot;=&gt;&quot;projectReaders&quot;},</span>
               <span class="ruby-comment">#    {&quot;role&quot;=&gt;&quot;OWNER&quot;,</span>
               <span class="ruby-comment">#     &quot;userByEmail&quot;=&gt;&quot;123456789-...com&quot;}]</span>
</pre>

<p>Manage the access rules by passing a block.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>

<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">access</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">access</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">access</span>.<span class="ruby-identifier">add_owner_group</span> <span class="ruby-string">&quot;owners@example.com&quot;</span>
  <span class="ruby-identifier">access</span>.<span class="ruby-identifier">add_writer_user</span> <span class="ruby-string">&quot;writer@example.com&quot;</span>
  <span class="ruby-identifier">access</span>.<span class="ruby-identifier">remove_writer_user</span> <span class="ruby-string">&quot;readers@example.com&quot;</span>
  <span class="ruby-identifier">access</span>.<span class="ruby-identifier">add_reader_special</span> :<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">access</span>.<span class="ruby-identifier">add_reader_view</span> <span class="ruby-identifier">other_dataset_view_object</span>
<span class="ruby-keyword">end</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="access-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 236</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">access</span>
  <span class="ruby-identifier">ensure_full_data!</span>
  <span class="ruby-identifier">g</span> = <span class="ruby-ivar">@gapi</span>
  <span class="ruby-identifier">g</span> = <span class="ruby-identifier">g</span>.<span class="ruby-identifier">to_hash</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:to_hash</span>
  <span class="ruby-identifier">a</span> = <span class="ruby-identifier">g</span>[<span class="ruby-string">&quot;access&quot;</span>] <span class="ruby-operator">||=</span> []
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">a</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">a2</span> = <span class="ruby-constant">Access</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">a</span>, <span class="ruby-identifier">dataset_ref</span>
  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">a2</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">access</span> = <span class="ruby-identifier">a2</span>.<span class="ruby-identifier">access</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">a2</span>.<span class="ruby-identifier">changed?</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="access-3D-method" class="method ">
  <a name="method-i-access-3D"></a>

  
    <h4>
      <code>access=(new_access)</code>
      <span>
        <a href="#method-i-access-3D">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Sets the access rules for a <a href="Dataset.html">Dataset</a> using the
Google Cloud <a href="../Datastore.html">Datastore</a> API data structure
of an array of hashes. See <a
href="https://cloud.google.com/bigquery/access-control">BigQuery Access
Control</a> for more information.</p>

<p>This method is provided for advanced usage of managing the access rules.
Calling <a href="Dataset.html#method-i-access">access</a> with a block is
the preferred way to manage access rules.</p>

<h3 id="method-i-access-3D-label-Example">Example<span><a href="#method-i-access-3D-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>

<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">access</span> = [{<span class="ruby-string">&quot;role&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;OWNER&quot;</span>,
                   <span class="ruby-string">&quot;specialGroup&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;projectOwners&quot;</span>},
                  {<span class="ruby-string">&quot;role&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;WRITER&quot;</span>,
                   <span class="ruby-string">&quot;specialGroup&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;projectWriters&quot;</span>},
                  {<span class="ruby-string">&quot;role&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;READER&quot;</span>,
                   <span class="ruby-string">&quot;specialGroup&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;projectReaders&quot;</span>},
                  {<span class="ruby-string">&quot;role&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;OWNER&quot;</span>,
                   <span class="ruby-string">&quot;userByEmail&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;123456789-...com&quot;</span>}]
</pre>
    

    
      <!-- <div class="method-source-code" id="access-3D-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 274</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">access=</span> <span class="ruby-identifier">new_access</span>
  <span class="ruby-identifier">patch_gapi!</span> <span class="ruby-identifier">access</span><span class="ruby-operator">:</span> <span class="ruby-identifier">new_access</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
      </div>
    </div>
  



          
        
          
            <h2 id="Attributes">Attributes Methods</h2>












    <div id="public-instance-methods" class="section">
      <h3 class="section-header">Public Instance Methods</h3>

      <div class="methods">
        
          <div id="created_at-method" class="method ">
  <a name="method-i-created_at"></a>

  
    <h4>
      <code>created_at()</code>
      <span>
        <a href="#method-i-created_at">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The time when this dataset was created.</p>
    

    
      <!-- <div class="method-source-code" id="created_at-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 169</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">created_at</span>
  <span class="ruby-identifier">ensure_full_data!</span>
  <span class="ruby-constant">Time</span>.<span class="ruby-identifier">at</span>(<span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;creationTime&quot;</span>] <span class="ruby-operator">/</span> <span class="ruby-value">1000.0</span>)
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="dataset_id-method" class="method ">
  <a name="method-i-dataset_id"></a>

  
    <h4>
      <code>dataset_id()</code>
      <span>
        <a href="#method-i-dataset_id">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>A unique ID for this dataset, without the project name. The ID must contain
only letters (a-z, A-Z), numbers (0-9), or underscores (_). The maximum
length is 1,024 characters.</p>
    

    
      <!-- <div class="method-source-code" id="dataset_id-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dataset_id</span>
  <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;datasetReference&quot;</span>][<span class="ruby-string">&quot;datasetId&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="default_expiration-method" class="method ">
  <a name="method-i-default_expiration"></a>

  
    <h4>
      <code>default_expiration()</code>
      <span>
        <a href="#method-i-default_expiration">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The default lifetime of all tables in the dataset, in milliseconds.</p>
    

    
      <!-- <div class="method-source-code" id="default_expiration-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">default_expiration</span>
  <span class="ruby-identifier">ensure_full_data!</span>
  <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;defaultTableExpirationMs&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="default_expiration-3D-method" class="method ">
  <a name="method-i-default_expiration-3D"></a>

  
    <h4>
      <code>default_expiration=(new_default_expiration)</code>
      <span>
        <a href="#method-i-default_expiration-3D">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Updates the default lifetime of all tables in the dataset, in milliseconds.</p>
    

    
      <!-- <div class="method-source-code" id="default_expiration-3D-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">default_expiration=</span> <span class="ruby-identifier">new_default_expiration</span>
  <span class="ruby-identifier">patch_gapi!</span> <span class="ruby-identifier">default_expiration</span><span class="ruby-operator">:</span> <span class="ruby-identifier">new_default_expiration</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="description-method" class="method ">
  <a name="method-i-description"></a>

  
    <h4>
      <code>description()</code>
      <span>
        <a href="#method-i-description">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>A user-friendly description of the dataset.</p>
    

    
      <!-- <div class="method-source-code" id="description-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 130</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">description</span>
  <span class="ruby-identifier">ensure_full_data!</span>
  <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;description&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="description-3D-method" class="method ">
  <a name="method-i-description-3D"></a>

  
    <h4>
      <code>description=(new_description)</code>
      <span>
        <a href="#method-i-description-3D">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Updates the user-friendly description of the dataset.</p>
    

    
      <!-- <div class="method-source-code" id="description-3D-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">description=</span> <span class="ruby-identifier">new_description</span>
  <span class="ruby-identifier">patch_gapi!</span> <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-identifier">new_description</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="etag-method" class="method ">
  <a name="method-i-etag"></a>

  
    <h4>
      <code>etag()</code>
      <span>
        <a href="#method-i-etag">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>A string hash of the dataset.</p>
    

    
      <!-- <div class="method-source-code" id="etag-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">etag</span>
  <span class="ruby-identifier">ensure_full_data!</span>
  <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;etag&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="location-method" class="method ">
  <a name="method-i-location"></a>

  
    <h4>
      <code>location()</code>
      <span>
        <a href="#method-i-location">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The geographic location where the dataset should reside. Possible values
include EU and US. The default value is US.</p>
    

    
      <!-- <div class="method-source-code" id="location-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 190</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">location</span>
  <span class="ruby-identifier">ensure_full_data!</span>
  <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;location&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="modified_at-method" class="method ">
  <a name="method-i-modified_at"></a>

  
    <h4>
      <code>modified_at()</code>
      <span>
        <a href="#method-i-modified_at">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The date when this dataset or any of its tables was last modified.</p>
    

    
      <!-- <div class="method-source-code" id="modified_at-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">modified_at</span>
  <span class="ruby-identifier">ensure_full_data!</span>
  <span class="ruby-constant">Time</span>.<span class="ruby-identifier">at</span>(<span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;lastModifiedTime&quot;</span>] <span class="ruby-operator">/</span> <span class="ruby-value">1000.0</span>)
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="name-method" class="method ">
  <a name="method-i-name"></a>

  
    <h4>
      <code>name()</code>
      <span>
        <a href="#method-i-name">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>A descriptive name for the dataset.</p>
    

    
      <!-- <div class="method-source-code" id="name-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 92</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">name</span>
  <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;friendlyName&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="name-3D-method" class="method ">
  <a name="method-i-name-3D"></a>

  
    <h4>
      <code>name=(new_name)</code>
      <span>
        <a href="#method-i-name-3D">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Updates the descriptive name for the dataset.</p>
    

    
      <!-- <div class="method-source-code" id="name-3D-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">name=</span> <span class="ruby-identifier">new_name</span>
  <span class="ruby-identifier">patch_gapi!</span> <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">new_name</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="project_id-method" class="method ">
  <a name="method-i-project_id"></a>

  
    <h4>
      <code>project_id()</code>
      <span>
        <a href="#method-i-project_id">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The ID of the project containing this dataset.</p>
    

    
      <!-- <div class="method-source-code" id="project_id-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">project_id</span>
  <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;datasetReference&quot;</span>][<span class="ruby-string">&quot;projectId&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="url-method" class="method ">
  <a name="method-i-url"></a>

  
    <h4>
      <code>url()</code>
      <span>
        <a href="#method-i-url">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>A URL that can be used to access the dataset using the REST API.</p>
    

    
      <!-- <div class="method-source-code" id="url-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 120</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">url</span>
  <span class="ruby-identifier">ensure_full_data!</span>
  <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;selfLink&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
      </div>
    </div>
  



          
        
          
            <h2 id="Data">Data Methods</h2>












    <div id="public-instance-methods" class="section">
      <h3 class="section-header">Public Instance Methods</h3>

      <div class="methods">
        
          <div id="query-method" class="method ">
  <a name="method-i-query"></a>

  
    <h4>
      <code>query(query, options = {})</code>
      <span>
        <a href="#method-i-query">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Queries data using the <a
href="https://cloud.google.com/bigquery/querying-data">synchronous
method</a>.</p>

<p>Sets the current dataset as the default dataset in the query. Useful for
using unqualified table names.</p>

<h3 id="method-i-query-label-Parameters">Parameters<span><a href="#method-i-query-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>query</code>
<dd>
<p>A query string, following the BigQuery <a
href="https://cloud.google.com/bigquery/query-reference">query syntax</a>,
of the query to execute. Example: “SELECT count(f1) FROM
[myProjectId:myDatasetId.myTableId]”. (<code>String</code>)</p>
</dd><dt><code>options[:max]</code>
<dd>
<p>The maximum number of rows of data to return per page of results. Setting
this flag to a small value such as 1000 and then paging through results
might improve reliability when the query result set is large. In addition
to this limit, responses are also limited to 10 MB. By default, there is no
maximum row count, and only the byte limit applies. (<code>Integer</code>)</p>
</dd><dt><code>options[:timeout]</code>
<dd>
<p>How long to wait for the query to complete, in milliseconds, before the
request times out and returns. Note that this is only a timeout for the
request, not the query. If the query takes longer to run than the timeout
value, the call returns without any results and with <a
href="QueryData.html#method-i-complete-3F">Gcloud::Bigquery::QueryData#complete?</a>
set to false. The default value is 10000 milliseconds (10 seconds).
(<code>Integer</code>)</p>
</dd><dt><code>options[:dryrun]</code>
<dd>
<p>If set to <code>true</code>, BigQuery doesn&#39;t run the job. Instead, if
the query is valid, BigQuery returns statistics about the job such as how
many bytes would be processed. If the query is invalid, an error returns.
The default value is <code>false</code>. (<code>Boolean</code>)</p>
</dd><dt><code>options[:cache]</code>
<dd>
<p>Whether to look for the result in the query cache. The query cache is a
best-effort cache that will be flushed whenever tables in the query are
modified. The default value is true. For more information, see <a
href="https://developers.google.com/bigquery/querying-data">query
caching</a>. (<code>Boolean</code>)</p>
</dd></dl>

<h3 id="method-i-query-label-Returns">Returns<span><a href="#method-i-query-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="QueryData.html">Gcloud::Bigquery::QueryData</a></p>

<h3 id="method-i-query-label-Example">Example<span><a href="#method-i-query-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>

<span class="ruby-identifier">data</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">query</span> <span class="ruby-string">&quot;SELECT name FROM my_table&quot;</span>
<span class="ruby-identifier">data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&quot;name&quot;</span>]
<span class="ruby-keyword">end</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="query-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 721</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">query</span> <span class="ruby-identifier">query</span>, <span class="ruby-identifier">options</span> = {}
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:dataset</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">dataset_id</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:project</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">project_id</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">query</span> <span class="ruby-identifier">query</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-constant">QueryData</span>.<span class="ruby-identifier">from_gapi</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">data</span>, <span class="ruby-identifier">connection</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="query_job-method" class="method ">
  <a name="method-i-query_job"></a>

  
    <h4>
      <code>query_job(query, options = {})</code>
      <span>
        <a href="#method-i-query_job">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Queries data using the <a
href="https://cloud.google.com/bigquery/querying-data">asynchronous
method</a>.</p>

<p>Sets the current dataset as the default dataset in the query. Useful for
using unqualified table names.</p>

<h3 id="method-i-query_job-label-Parameters">Parameters<span><a href="#method-i-query_job-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>query</code>
<dd>
<p>A query string, following the BigQuery <a
href="https://cloud.google.com/bigquery/query-reference">query syntax</a>,
of the query to execute. Example: “SELECT count(f1) FROM
[myProjectId:myDatasetId.myTableId]”. (<code>String</code>)</p>
</dd><dt><code>options[:priority]</code>
<dd>
<p>Specifies a priority for the query. Possible values include
<code>INTERACTIVE</code> and <code>BATCH</code>. The default value is
<code>INTERACTIVE</code>. (<code>String</code>)</p>
</dd><dt><code>options[:cache]</code>
<dd>
<p>Whether to look for the result in the query cache. The query cache is a
best-effort cache that will be flushed whenever tables in the query are
modified. The default value is <code>true</code>. (<code>Boolean</code>)</p>
</dd><dt><code>options[:table]</code>
<dd>
<p>The destination table where the query results should be stored. If not
present, a new table will be created to store the results.
(<code>Table</code>)</p>
</dd><dt><code>options[:create]</code>
<dd>
<p>Specifies whether the job is allowed to create new tables.
(<code>String</code>)</p>

<p>The following values are supported:</p>
<ul><li>
<p><code>needed</code> - Create the table if it does not exist.</p>
</li><li>
<p><code>never</code> - The table must already exist. A &#39;notFound&#39;
error is raised if the table does not exist.</p>
</li></ul>
</dd><dt><code>options[:write]</code>
<dd>
<p>Specifies the action that occurs if the destination table already exists.
(<code>String</code>)</p>

<p>The following values are supported:</p>
<ul><li>
<p><code>truncate</code> - BigQuery overwrites the table data.</p>
</li><li>
<p><code>append</code> - BigQuery appends the data to the table.</p>
</li><li>
<p><code>empty</code> - A &#39;duplicate&#39; error is returned in the job
result if the table exists and contains data.</p>
</li></ul>
</dd><dt><code>options[:large_results]</code>
<dd>
<p>If <code>true</code>, allows the query to produce arbitrarily large result
tables at a slight cost in performance. Requires
<code>options[:table]</code> to be set. (<code>Boolean</code>)</p>
</dd><dt><code>options[:flatten]</code>
<dd>
<p>Flattens all nested and repeated fields in the query results. The default
value is <code>true</code>. <code>options[:large_results]</code> must be
<code>true</code> if this is set to <code>false</code>.
(<code>Boolean</code>)</p>
</dd></dl>

<h3 id="method-i-query_job-label-Returns">Returns<span><a href="#method-i-query_job-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="QueryJob.html">Gcloud::Bigquery::QueryJob</a></p>

<h3 id="method-i-query_job-label-Example">Example<span><a href="#method-i-query_job-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>

<span class="ruby-identifier">job</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">query_job</span> <span class="ruby-string">&quot;SELECT name FROM my_table&quot;</span>

<span class="ruby-identifier">job</span>.<span class="ruby-identifier">wait_until_done!</span>
<span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">job</span>.<span class="ruby-identifier">failed?</span>
  <span class="ruby-identifier">job</span>.<span class="ruby-identifier">query_results</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&quot;name&quot;</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="query_job-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 652</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">query_job</span> <span class="ruby-identifier">query</span>, <span class="ruby-identifier">options</span> = {}
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:dataset</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword">self</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">query_job</span> <span class="ruby-identifier">query</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-constant">Job</span>.<span class="ruby-identifier">from_gapi</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">data</span>, <span class="ruby-identifier">connection</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
      </div>
    </div>
  



          
        
          
            <h2 id="Lifecycle">Lifecycle Methods</h2>












    <div id="public-instance-methods" class="section">
      <h3 class="section-header">Public Instance Methods</h3>

      <div class="methods">
        
          <div id="delete-method" class="method ">
  <a name="method-i-delete"></a>

  
    <h4>
      <code>delete(options = {})</code>
      <span>
        <a href="#method-i-delete">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Permanently deletes the dataset. The dataset must be empty before it can be
deleted unless the <code>force</code> option is set to <code>true</code>.</p>

<h3 id="method-i-delete-label-Parameters">Parameters<span><a href="#method-i-delete-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>options</code>
<dd>
<p>An optional Hash for controlling additional behavior. (<code>Hash</code>)</p>
</dd><dt><code>options[:force]</code>
<dd>
<p>If <code>true</code>, delete all the tables in the dataset. If
<code>false</code> and the dataset contains tables, the request will fail.
Default is <code>false</code>. (<code>Boolean</code>)</p>
</dd></dl>

<h3 id="method-i-delete-label-Returns">Returns<span><a href="#method-i-delete-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>true</code> if the dataset was deleted.</p>

<h3 id="method-i-delete-label-Example">Example<span><a href="#method-i-delete-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>

<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>
<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">delete</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="delete-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete</span> <span class="ruby-identifier">options</span> = {}
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete_dataset</span> <span class="ruby-identifier">dataset_id</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
      </div>
    </div>
  



          
        
          
            <h2 id="Table">Table Methods</h2>












    <div id="public-instance-methods" class="section">
      <h3 class="section-header">Public Instance Methods</h3>

      <div class="methods">
        
          <div id="create_table-method" class="method ">
  <a name="method-i-create_table"></a>

  
    <h4>
      <code>create_table(table_id, options = {})</code>
      <span>
        <a href="#method-i-create_table">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Creates a new table.</p>

<h3 id="method-i-create_table-label-Parameters">Parameters<span><a href="#method-i-create_table-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>table_id</code>
<dd>
<p>The ID of the table. The ID must contain only letters (a-z, A-Z), numbers
(0-9), or underscores (_). The maximum length is 1,024 characters.
(<code>String</code>)</p>
</dd><dt><code>options</code>
<dd>
<p>An optional Hash for controlling additional behavior. (<code>Hash</code>)</p>
</dd><dt><code>options[:name]</code>
<dd>
<p>A descriptive name for the table. (<code>String</code>)</p>
</dd><dt><code>options[:description]</code>
<dd>
<p>A user-friendly description of the table. (<code>String</code>)</p>
</dd><dt><code>options[:schema]</code>
<dd>
<p>A hash specifying fields and data types for the table. A block may be
passed instead (see examples.) For the format of this hash, see the <a
href="https://cloud.google.com/bigquery/docs/reference/v2/tables#resource">Tables
resource </a> . (<code>Hash</code>)</p>
</dd></dl>

<h3 id="method-i-create_table-label-Returns">Returns<span><a href="#method-i-create_table-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="Table.html">Gcloud::Bigquery::Table</a></p>

<h3 id="method-i-create_table-label-Examples">Examples<span><a href="#method-i-create_table-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>
<span class="ruby-identifier">table</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">create_table</span> <span class="ruby-string">&quot;my_table&quot;</span>
</pre>

<p>You can also pass name and description options.</p>

<pre>require &quot;gcloud&quot;

gcloud = Gcloud.new
bigquery = gcloud.bigquery
dataset = bigquery.dataset &quot;my_dataset&quot;
table = dataset.create_table &quot;my_table&quot;
                             name: &quot;My Table&quot;,
                             description: &quot;A description of my table.&quot;</pre>

<p>You can define the table&#39;s schema using a block.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>
<span class="ruby-identifier">table</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">create_table</span> <span class="ruby-string">&quot;my_table&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">schema</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">schema</span>.<span class="ruby-identifier">string</span> <span class="ruby-string">&quot;first_name&quot;</span>, <span class="ruby-identifier">mode</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">required</span>
  <span class="ruby-identifier">schema</span>.<span class="ruby-identifier">record</span> <span class="ruby-string">&quot;cities_lived&quot;</span>, <span class="ruby-identifier">mode</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">repeated</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">nested_schema</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">nested_schema</span>.<span class="ruby-identifier">string</span> <span class="ruby-string">&quot;place&quot;</span>, <span class="ruby-identifier">mode</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">required</span>
    <span class="ruby-identifier">nested_schema</span>.<span class="ruby-identifier">integer</span> <span class="ruby-string">&quot;number_of_years&quot;</span>, <span class="ruby-identifier">mode</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">required</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Or, if you are adapting existing code that was written for the <a
href="https://cloud.google.com/bigquery/docs/reference/v2/tables#resource">Rest
API </a>, you can pass the table&#39;s schema as a hash.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>

<span class="ruby-identifier">schema</span> = {
  <span class="ruby-string">&quot;fields&quot;</span> =<span class="ruby-operator">&gt;</span> [
    {
      <span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;first_name&quot;</span>,
      <span class="ruby-string">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;STRING&quot;</span>,
      <span class="ruby-string">&quot;mode&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;REQUIRED&quot;</span>
    },
    {
      <span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;cities_lived&quot;</span>,
      <span class="ruby-string">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;RECORD&quot;</span>,
      <span class="ruby-string">&quot;mode&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;REPEATED&quot;</span>,
      <span class="ruby-string">&quot;fields&quot;</span> =<span class="ruby-operator">&gt;</span> [
        {
          <span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;place&quot;</span>,
          <span class="ruby-string">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;STRING&quot;</span>,
          <span class="ruby-string">&quot;mode&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;REQUIRED&quot;</span>
        },
        {
          <span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;number_of_years&quot;</span>,
          <span class="ruby-string">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;INTEGER&quot;</span>,
          <span class="ruby-string">&quot;mode&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;REQUIRED&quot;</span>
        }
      ]
    }
  ]
}
<span class="ruby-identifier">table</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">create_table</span> <span class="ruby-string">&quot;my_table&quot;</span>, <span class="ruby-identifier">schema</span><span class="ruby-operator">:</span> <span class="ruby-identifier">schema</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="create_table-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 418</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_table</span> <span class="ruby-identifier">table_id</span>, <span class="ruby-identifier">options</span> = {}
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:schema</span>]
      <span class="ruby-identifier">fail</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;only schema block or schema option is allowed&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">schema_builder</span> = <span class="ruby-constant">Table</span><span class="ruby-operator">::</span><span class="ruby-constant">Schema</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">schema_builder</span>
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:schema</span>] = <span class="ruby-identifier">schema_builder</span>.<span class="ruby-identifier">schema</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">schema_builder</span>.<span class="ruby-identifier">changed?</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">insert_table</span> <span class="ruby-identifier">table_id</span>, <span class="ruby-identifier">options</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="create_view-method" class="method ">
  <a name="method-i-create_view"></a>

  
    <h4>
      <code>create_view(table_id, query, options = {})</code>
      <span>
        <a href="#method-i-create_view">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Creates a new view table from the given query.</p>

<h3 id="method-i-create_view-label-Parameters">Parameters<span><a href="#method-i-create_view-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>table_id</code>
<dd>
<p>The ID of the view table. The ID must contain only letters (a-z, A-Z),
numbers (0-9), or underscores (_). The maximum length is 1,024 characters.
(<code>String</code>)</p>
</dd><dt><code>query</code>
<dd>
<p>The query that BigQuery executes when the view is referenced.
(<code>String</code>)</p>
</dd><dt><code>options</code>
<dd>
<p>An optional Hash for controlling additional behavior. (<code>Hash</code>)</p>
</dd><dt><code>options[:name]</code>
<dd>
<p>A descriptive name for the table. (<code>String</code>)</p>
</dd><dt><code>options[:description]</code>
<dd>
<p>A user-friendly description of the table. (<code>String</code>)</p>
</dd></dl>

<h3 id="method-i-create_view-label-Returns">Returns<span><a href="#method-i-create_view-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="View.html">Gcloud::Bigquery::View</a></p>

<h3 id="method-i-create_view-label-Examples">Examples<span><a href="#method-i-create_view-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>
<span class="ruby-identifier">view</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">create_view</span> <span class="ruby-string">&quot;my_view&quot;</span>,
          <span class="ruby-string">&quot;SELECT name, age FROM [proj:dataset.users]&quot;</span>
</pre>

<p>A name and description can be provided:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>
<span class="ruby-identifier">view</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">create_view</span> <span class="ruby-string">&quot;my_view&quot;</span>,
          <span class="ruby-string">&quot;SELECT name, age FROM [proj:dataset.users]&quot;</span>,
          <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;My View&quot;</span>, <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;This is my view&quot;</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="create_view-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 477</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_view</span> <span class="ruby-identifier">table_id</span>, <span class="ruby-identifier">query</span>, <span class="ruby-identifier">options</span> = {}
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:query</span>] = <span class="ruby-identifier">query</span>
  <span class="ruby-identifier">create_table</span> <span class="ruby-identifier">table_id</span>, <span class="ruby-identifier">options</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="table-method" class="method ">
  <a name="method-i-table"></a>

  
    <h4>
      <code>table(table_id)</code>
      <span>
        <a href="#method-i-table">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Retrieves an existing table by ID.</p>

<h3 id="method-i-table-label-Parameters">Parameters<span><a href="#method-i-table-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>table_id</code>
<dd>
<p>The ID of a table. (<code>String</code>)</p>
</dd></dl>

<h3 id="method-i-table-label-Returns">Returns<span><a href="#method-i-table-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="Table.html">Gcloud::Bigquery::Table</a> or <a
href="View.html">Gcloud::Bigquery::View</a> or nil if the table does not
exist</p>

<h3 id="method-i-table-label-Example">Example<span><a href="#method-i-table-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>
<span class="ruby-identifier">table</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">table</span> <span class="ruby-string">&quot;my_table&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">table</span>.<span class="ruby-identifier">name</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="table-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 507</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">table</span> <span class="ruby-identifier">table_id</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">get_table</span> <span class="ruby-identifier">dataset_id</span>, <span class="ruby-identifier">table_id</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-constant">Table</span>.<span class="ruby-identifier">from_gapi</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">data</span>, <span class="ruby-identifier">connection</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="tables-method" class="method ">
  <a name="method-i-tables"></a>

  
    <h4>
      <code>tables(options = {})</code>
      <span>
        <a href="#method-i-tables">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Retrieves the list of tables belonging to the dataset.</p>

<h3 id="method-i-tables-label-Parameters">Parameters<span><a href="#method-i-tables-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>options</code>
<dd>
<p>An optional Hash for controlling additional behavior. (<code>Hash</code>)</p>
</dd><dt><code>options[:token]</code>
<dd>
<p>A previously-returned page token representing part of the larger set of
results to view. (<code>String</code>)</p>
</dd><dt><code>options[:max]</code>
<dd>
<p>Maximum number of tables to return. (<code>Integer</code>)</p>
</dd></dl>

<h3 id="method-i-tables-label-Returns">Returns<span><a href="#method-i-tables-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Array of <a href="Table.html">Gcloud::Bigquery::Table</a> or <a
href="View.html">Gcloud::Bigquery::View</a> (Gcloud::Bigquery::Table::List)</p>

<h3 id="method-i-tables-label-Examples">Examples<span><a href="#method-i-tables-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>
<span class="ruby-identifier">tables</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">tables</span>
<span class="ruby-identifier">tables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">table</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">table</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you have a significant number of tables, you may need to paginate
through them: (See <a
href="Dataset/List.html#attribute-i-token">Gcloud::Bigquery::Dataset::List#token</a>)</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">bigquery</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">bigquery</span>
<span class="ruby-identifier">dataset</span> = <span class="ruby-identifier">bigquery</span>.<span class="ruby-identifier">dataset</span> <span class="ruby-string">&quot;my_dataset&quot;</span>

<span class="ruby-identifier">all_tables</span> = []
<span class="ruby-identifier">tmp_tables</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">tables</span>
<span class="ruby-keyword">while</span> <span class="ruby-identifier">tmp_tables</span>.<span class="ruby-identifier">any?</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">tmp_tables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">table</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">all_tables</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">table</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># break loop if no more tables available</span>
  <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">tmp_tables</span>.<span class="ruby-identifier">token</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-comment"># get the next group of tables</span>
  <span class="ruby-identifier">tmp_tables</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">tables</span> <span class="ruby-identifier">token</span><span class="ruby-operator">:</span> <span class="ruby-identifier">tmp_tables</span>.<span class="ruby-identifier">token</span>
<span class="ruby-keyword">end</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="tables-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/bigquery/dataset.rb, line 570</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tables</span> <span class="ruby-identifier">options</span> = {}
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">list_tables</span> <span class="ruby-identifier">dataset_id</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-constant">Table</span><span class="ruby-operator">::</span><span class="ruby-constant">List</span>.<span class="ruby-identifier">from_response</span> <span class="ruby-identifier">resp</span>, <span class="ruby-identifier">connection</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
      </div>
    </div>
  



          
        
      </section>

      <nav class="side-nav">
        
<div class="side-nav--meta">
  <div id="doc-build-date">
    Docs built on Oct 07, 2015.
  </div>
</div>

<ul>
  <h4 class="list-item--heading">Getting Started</h4>
  <li class="toc-l0"><a class="reference internal" href="../../index.html">Overview</a></li>
  
    <li class="toc-l0"><a class="reference internal" href="../../AUTHENTICATION.md">Authentication Guide</a></li>
  
</ul>

<ul>
  <h4 class="list-item--heading">API</h4>
  
      <li class="toc-l0">
        <a class="reference internal" href="../../Gcloud.html">
          Gcloud
        </a>
      </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Bigquery.html">
          BigQuery
        </a>
      </li>
      
        <li class="toc-l1">
          <a class="reference internal" href="Project.html">
            Project
          </a>
        </li>
      
        <li class="toc-l1">
          <a class="reference internal current" href="Dataset.html">
            Dataset
          </a>
        </li>
      
        <li class="toc-l1">
          <a class="reference internal" href="Job.html">
            Job
          </a>
        </li>
      
        <li class="toc-l1">
          <a class="reference internal" href="Table.html">
            Table
          </a>
        </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Datastore.html">
          Datastore
        </a>
      </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Dns.html">
          DNS
        </a>
      </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Pubsub.html">
          Pub/Sub
        </a>
      </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Storage.html">
          Storage
        </a>
      </li>
      
  
  <li class="toc-l0"><a class="reference internal" href="../../reference.html">API Reference</a></li>
</ul>

<ul class="external-links">
  <li>
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby" title="Github repository">
      <img src="/gcloud-ruby/img/icon-link-github.svg" alt="Github icon">
      Github
    </a>
  </li>
  <li>
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues" title="Issues on Github">
      <img src="/gcloud-ruby/img/icon-link-issues.svg" alt="Issues icon">
      Issues
    </a>
  </li>
  <li>
    <a href="http://stackoverflow.com/questions/tagged/gcloud-ruby" title="gcloud on StackOverflow">
      <img src="/gcloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon">
      StackOverflow
    </a>
  </li>
  <li>
    <a href="http://rubygems.org/gems/gcloud" title="RubyGems" class="ext-link">
       <img src="/gcloud-ruby/img/icon-link-rubygems.svg" alt="RubyGems icon">
      RubyGems
    </a>
  </li>
</ul>

      </nav>

    </article>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script ="/gcloud-ruby/js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="/gcloud-ruby/js/plugins.js"></script>
<script src="/gcloud-ruby/js/main.js"></script>

<script>
  (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-49880327-13');ga('send','pageview');
</script>


  </body>
</html>
