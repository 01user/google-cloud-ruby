<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Gcloud::Pubsub::Subscription &mdash; Gcloud Documentation</title>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/gcloud-ruby/css/normalize.css">
<link rel="stylesheet" href="/gcloud-ruby/css/main.css">
<script src="/gcloud-ruby/js/vendor/modernizr-2.6.2.min.js"></script>
<link href='//fonts.googleapis.com/css?family=Droid+Sans+Mono|Roboto:300,400,700,700italic,400italic|Open+Sans:300' rel='stylesheet' type='text/css'>
<link rel="shortcut icon" href="https://cloud.google.com/images/gcp-favicon.ico">

  </head>

  <body class="lang-page">
    <!--[if lt IE 7]>
  <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

<header class="page-header fixed" role="banner">
  <h1 class="logo">
    <a href="/gcloud-ruby/" title="back to home">
      <img src="/gcloud-ruby/img/logo.svg" alt="Google Cloud Platform">
      <span class="gcloud">gcloud</span>
    </a>
  </h1>

  <nav class="main-nav">
    <div class="nav-current">Ruby</div>
    <ul class="menu">
      <li>
        <a href="/gcloud-node/#/docs" title="gcloud-node">
          <img src="/gcloud-ruby/img/icon-lang-nodejs.svg" alt="Node.js icon" class="menu-icon">
          Node.js
        </a>
      </li>
      <li>
        <a href="/gcloud-python/latest/" title="gcloud-python">
          <img src="/gcloud-ruby/img/icon-lang-python.svg" alt="Python icon" class="menu-icon">
          Python
        </a>
      </li>
      <li>
        <a href="/gcloud-ruby/" title="gcloud-ruby">
          <img src="/gcloud-ruby/img/icon-lang-ruby.svg" alt="Ruby icon" class="menu-icon" width="24">
          Ruby
        </a>
      </li>
    </ul>
  </nav>

  <div class="github-issue">
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/new?title=%5BDocumentation+Issue%5D+" target="_blank" class="v-btn">
      <img src="/gcloud-ruby/img/icon-link-github.svg" />
      Report an Issue
    </a>
  </div>
</header>


    <article class="main lang-page" role="main">

      <header class="docs-header">
        <h1 class="page-title">Gcloud::Pubsub::Subscription</h1>
      </header>

      <section class="content">

        <div id="description" class="description">
          
<h1 id="class-Gcloud::Pubsub::Subscription-label-Subscription"><a href="Subscription.html">Subscription</a><span><a href="#class-Gcloud::Pubsub::Subscription-label-Subscription">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>Represents a Pub/Sub subscription, contains the stream of messages from a
single, specific <a href="Topic.html">Topic</a>, to be delivered to the
subscribing application.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud/pubsub&quot;</span>

<span class="ruby-identifier">pubsub</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">pubsub</span>

<span class="ruby-identifier">sub</span> = <span class="ruby-identifier">pubsub</span>.<span class="ruby-identifier">subscription</span> <span class="ruby-string">&quot;my-topic-sub&quot;</span>
<span class="ruby-identifier">msgs</span> = <span class="ruby-identifier">sub</span>.<span class="ruby-identifier">pull</span>
<span class="ruby-identifier">msgs</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">msg</span>.<span class="ruby-identifier">acknowledge!</span> }
</pre>

        </div>

        <div class="section-links">
  
    <div>
      Parent:
      
        Object
      
    </div>
  

  

  
    
    

    
    
        <div>
          Public Instance Methods:

          
            <a href="#method-i-ack">ack</a>
          
            <a href="#method-i-acknowledge">acknowledge</a>
          
            <a href="#method-i-deadline">deadline</a>
          
            <a href="#method-i-delay">delay</a>
          
            <a href="#method-i-delete">delete</a>
          
            <a href="#method-i-endpoint">endpoint</a>
          
            <a href="#method-i-endpoint-3D">endpoint=</a>
          
            <a href="#method-i-exists-3F">exists?</a>
          
            <a href="#method-i-name">name</a>
          
            <a href="#method-i-pull">pull</a>
          
            <a href="#method-i-topic">topic</a>
          
        </div>
      
    
  
</div>


        
          <h2 id="5Buntitled-5D"></h2>












    <div id="public-instance-methods" class="section">
      <h3 class="section-header">Public Instance Methods</h3>

      <div class="methods">
        
          <div id="ack-method" class="method alias">
  <a name="method-i-ack"></a>

  
    <h4>
      <code>ack(*messages)</code>
      <span>
        <a href="#method-i-ack">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      
    

    
  </div>

  

  
    <div class="aliases">
      Alias for: <a href="Subscription.html#method-i-acknowledge">acknowledge</a>
    </div>
  
</div>

        
          <div id="acknowledge-method" class="method ">
  <a name="method-i-acknowledge"></a>

  
    <h4>
      <code>acknowledge(*messages)</code>
      <span>
        <a href="#method-i-acknowledge">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Acknowledges receipt of a message. After an ack, the Pub/Sub system can
remove the message from the subscription. Acknowledging a message whose ack
deadline has expired may succeed, although the message may have been sent
again. Acknowledging a message more than once will not result in an error.
This is only used for messages received via pull.</p>

<h3 id="method-i-acknowledge-label-Parameters">Parameters<span><a href="#method-i-acknowledge-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>messages</code>
<dd>
<p>One or more <a href="ReceivedMesssage.html">ReceivedMesssage</a> objects or
ack_id values. (<code>ReceivedMesssage</code> or <code>ack_id</code>)</p>
</dd></dl>

<h3 id="method-i-acknowledge-label-Example">Example<span><a href="#method-i-acknowledge-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud/pubsub&quot;</span>

<span class="ruby-identifier">pubsub</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">pubsub</span>

<span class="ruby-identifier">sub</span> = <span class="ruby-identifier">pubsub</span>.<span class="ruby-identifier">subscription</span> <span class="ruby-string">&quot;my-topic-sub&quot;</span>
<span class="ruby-identifier">ack_ids</span> = <span class="ruby-identifier">sub</span>.<span class="ruby-identifier">pull</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">msg</span>.<span class="ruby-identifier">ack_id</span> }
<span class="ruby-identifier">sub</span>.<span class="ruby-identifier">acknowledge</span> <span class="ruby-operator">*</span><span class="ruby-identifier">ack_ids</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="acknowledge-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/pubsub/subscription.rb, line 287</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">acknowledge</span> <span class="ruby-operator">*</span><span class="ruby-identifier">messages</span>
  <span class="ruby-identifier">ack_ids</span> = <span class="ruby-identifier">coerce_ack_ids</span> <span class="ruby-identifier">messages</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">acknowledge</span> <span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">ack_ids</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  
    <div class="aliases">
      Also aliased as: <a href="Subscription.html#method-i-ack">ack</a>
    </div>
  

  
</div>

        
          <div id="deadline-method" class="method ">
  <a name="method-i-deadline"></a>

  
    <h4>
      <code>deadline()</code>
      <span>
        <a href="#method-i-deadline">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The maximum number of seconds after a subscriber receives a message before
the subscriber should acknowledge or nack the message. If the ack deadline
for a message passes without an ack or a nack, the Pub/Sub system will
eventually redeliver the message. If a subscriber acknowledges after the
deadline, the Pub/Sub system may accept the ack, but but the message may
already have been sent again. Multiple acks to the message are allowed.</p>
    

    
      <!-- <div class="method-source-code" id="deadline-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/pubsub/subscription.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">deadline</span>
  <span class="ruby-identifier">ensure_gapi!</span>
  <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;ackDeadlineSeconds&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="delay-method" class="method ">
  <a name="method-i-delay"></a>

  
    <h4>
      <code>delay(new_deadline, *messages)</code>
      <span>
        <a href="#method-i-delay">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Modifies the acknowledge deadline for messages.</p>

<p>This indicates that more time is needed to process the messages, or to make
the messages available for redelivery if the processing was interrupted.</p>

<h3 id="method-i-delay-label-Parameters">Parameters<span><a href="#method-i-delay-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>new_deadline</code>
<dd>
<p>The new ack deadline in seconds from the time this request is sent to the
Pub/Sub system. Must be &gt;= 0. For example, if the value is 10, the new
ack deadline will expire 10 seconds after the call is made. Specifying zero
may immediately make the messages available for another pull request.
(<code>Integer</code>)</p>
</dd><dt><code>messages</code>
<dd>
<p>One or more <a href="ReceivedMesssage.html">ReceivedMesssage</a> objects or
ack_id values. (<code>ReceivedMesssage</code> or <code>ack_id</code>)</p>
</dd></dl>

<h3 id="method-i-delay-label-Example">Example<span><a href="#method-i-delay-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud/pubsub&quot;</span>

<span class="ruby-identifier">pubsub</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">pubsub</span>

<span class="ruby-identifier">sub</span> = <span class="ruby-identifier">pubsub</span>.<span class="ruby-identifier">subscription</span> <span class="ruby-string">&quot;my-topic-sub&quot;</span>
<span class="ruby-identifier">messages</span> = <span class="ruby-identifier">sub</span>.<span class="ruby-identifier">pull</span>
<span class="ruby-identifier">sub</span>.<span class="ruby-identifier">delay</span> <span class="ruby-value">120</span>, <span class="ruby-identifier">messages</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="delay-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/pubsub/subscription.rb, line 328</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delay</span> <span class="ruby-identifier">new_deadline</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">messages</span>
  <span class="ruby-identifier">ack_ids</span> = <span class="ruby-identifier">coerce_ack_ids</span> <span class="ruby-identifier">messages</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">modify_ack_deadline</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">ack_ids</span>, <span class="ruby-identifier">new_deadline</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="delete-method" class="method ">
  <a name="method-i-delete"></a>

  
    <h4>
      <code>delete()</code>
      <span>
        <a href="#method-i-delete">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Deletes an existing subscription. All pending messages in the subscription
are immediately dropped.</p>

<h3 id="method-i-delete-label-Returns">Returns<span><a href="#method-i-delete-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>true</code> if the subscription was deleted.</p>

<h3 id="method-i-delete-label-Example">Example<span><a href="#method-i-delete-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud/pubsub&quot;</span>

<span class="ruby-identifier">pubsub</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">pubsub</span>

<span class="ruby-identifier">sub</span> = <span class="ruby-identifier">pubsub</span>.<span class="ruby-identifier">subscription</span> <span class="ruby-string">&quot;my-topic-sub&quot;</span>
<span class="ruby-identifier">sub</span>.<span class="ruby-identifier">delete</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="delete-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/pubsub/subscription.rb, line 186</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete_subscription</span> <span class="ruby-identifier">name</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="endpoint-method" class="method ">
  <a name="method-i-endpoint"></a>

  
    <h4>
      <code>endpoint()</code>
      <span>
        <a href="#method-i-endpoint">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>A URL locating the endpoint that messages are pushed.</p>
    

    
      <!-- <div class="method-source-code" id="endpoint-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/pubsub/subscription.rb, line 112</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">endpoint</span>
  <span class="ruby-identifier">ensure_gapi!</span>
  <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;pushConfig&quot;</span>][<span class="ruby-string">&quot;pushEndpoint&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;pushConfig&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="endpoint-3D-method" class="method ">
  <a name="method-i-endpoint-3D"></a>

  
    <h4>
      <code>endpoint=(new_endpoint)</code>
      <span>
        <a href="#method-i-endpoint-3D">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>A URL locating the endpoint that messages are pushed.</p>
    

    
      <!-- <div class="method-source-code" id="endpoint-3D-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/pubsub/subscription.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">endpoint=</span> <span class="ruby-identifier">new_endpoint</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">modify_push_config</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_endpoint</span>, {}
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;pushConfig&quot;</span>][<span class="ruby-string">&quot;pushEndpoint&quot;</span>] = <span class="ruby-identifier">new_endpoint</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@gapi</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="exists-3F-method" class="method ">
  <a name="method-i-exists-3F"></a>

  
    <h4>
      <code>exists?()</code>
      <span>
        <a href="#method-i-exists-3F">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Determines whether the subscription exists in the Pub/Sub service.</p>

<h3 id="method-i-exists-3F-label-Example">Example<span><a href="#method-i-exists-3F-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud/pubsub&quot;</span>

<span class="ruby-identifier">pubsub</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">pubsub</span>

<span class="ruby-identifier">sub</span> = <span class="ruby-identifier">pubsub</span>.<span class="ruby-identifier">subscription</span> <span class="ruby-string">&quot;my-topic-sub&quot;</span>
<span class="ruby-identifier">sub</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-comment">#=&gt; true</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="exists-3F-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/pubsub/subscription.rb, line 141</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">exists?</span>
  <span class="ruby-comment"># Always true if we have a gapi object</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@gapi</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-comment"># If we have a value, return it</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@exists</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@exists</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">ensure_gapi!</span>
  <span class="ruby-ivar">@exists</span> = <span class="ruby-operator">!</span><span class="ruby-ivar">@gapi</span>.<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">NotFoundError</span>
  <span class="ruby-ivar">@exists</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="name-method" class="method ">
  <a name="method-i-name"></a>

  
    <h4>
      <code>name()</code>
      <span>
        <a href="#method-i-name">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The name of the subscription.</p>
    

    
      <!-- <div class="method-source-code" id="name-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/pubsub/subscription.rb, line 69</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">name</span>
  <span class="ruby-ivar">@gapi</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;name&quot;</span>] <span class="ruby-operator">:</span> <span class="ruby-ivar">@name</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="pull-method" class="method ">
  <a name="method-i-pull"></a>

  
    <h4>
      <code>pull(options = {})</code>
      <span>
        <a href="#method-i-pull">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Pulls messages from the server. Returns an empty list if there are no
messages available in the backlog. The server may return UNAVAILABLE if
there are too many concurrent pull requests pending for the given
subscription.</p>

<h3 id="method-i-pull-label-Parameters">Parameters<span><a href="#method-i-pull-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>options</code>
<dd>
<p>An optional Hash for controlling additional behavior. (<code>Hash</code>)</p>
</dd><dt><code>options[:immediate]</code>
<dd>
<p>When <code>true</code>, the system will respond immediately, either with a
message if available or <code>nil</code> if no message is available. When
not specified, or when <code>false</code>, the call will block until a
message is available, or may return UNAVAILABLE if no messages become
available within a reasonable amount of time. (<code>Boolean</code>) When
<code>true</code> the system will respond immediately even if it is not
able to return a message. Otherwise the system is allowed to wait until at
least one message is available.</p>
</dd><dt><code>options[:max]</code>
<dd>
<p>The maximum number of messages to return for this request. The Pub/Sub
system may return fewer than the number specified. (<code>Integer</code>)</p>
</dd></dl>

<h3 id="method-i-pull-label-Returns">Returns<span><a href="#method-i-pull-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Array of <a
href="ReceivedMesssage.html">Gcloud::Pubsub::ReceivedMesssage</a></p>

<h3 id="method-i-pull-label-Examples">Examples<span><a href="#method-i-pull-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud/pubsub&quot;</span>

<span class="ruby-identifier">pubsub</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">pubsub</span>

<span class="ruby-identifier">sub</span> = <span class="ruby-identifier">pubsub</span>.<span class="ruby-identifier">subscription</span> <span class="ruby-string">&quot;my-topic-sub&quot;</span>
<span class="ruby-identifier">sub</span>.<span class="ruby-identifier">pull</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">msg</span>.<span class="ruby-identifier">acknowledge!</span> }
</pre>

<p>Results can be returned immediately with the <code>:immediate</code>
option:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud/pubsub&quot;</span>

<span class="ruby-identifier">pubsub</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">pubsub</span>

<span class="ruby-identifier">sub</span> = <span class="ruby-identifier">pubsub</span>.<span class="ruby-identifier">subscription</span> <span class="ruby-string">&quot;my-topic-sub&quot;</span>, <span class="ruby-identifier">immediate</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
<span class="ruby-identifier">sub</span>.<span class="ruby-identifier">pull</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">msg</span>.<span class="ruby-identifier">acknowledge!</span> }
</pre>

<p>A maximum number of messages returned can also be speified:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud/pubsub&quot;</span>

<span class="ruby-identifier">pubsub</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">pubsub</span>

<span class="ruby-identifier">sub</span> = <span class="ruby-identifier">pubsub</span>.<span class="ruby-identifier">subscription</span> <span class="ruby-string">&quot;my-topic-sub&quot;</span>, <span class="ruby-identifier">max</span><span class="ruby-operator">:</span> <span class="ruby-value">10</span>
<span class="ruby-identifier">sub</span>.<span class="ruby-identifier">pull</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">msg</span>.<span class="ruby-identifier">acknowledge!</span> }
</pre>
    

    
      <!-- <div class="method-source-code" id="pull-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/pubsub/subscription.rb, line 251</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pull</span> <span class="ruby-identifier">options</span> = {}
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">pull</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-constant">Array</span>(<span class="ruby-identifier">resp</span>.<span class="ruby-identifier">data</span>[<span class="ruby-string">&quot;receivedMessages&quot;</span>]).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gapi</span><span class="ruby-operator">|</span>
      <span class="ruby-constant">ReceivedMesssage</span>.<span class="ruby-identifier">from_gapi</span> <span class="ruby-identifier">gapi</span>, <span class="ruby-keyword">self</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="topic-method" class="method ">
  <a name="method-i-topic"></a>

  
    <h4>
      <code>topic()</code>
      <span>
        <a href="#method-i-topic">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The <a href="Topic.html">Topic</a> from which this subscription is
receiving messages.</p>

<h3 id="method-i-topic-label-Returns">Returns<span><a href="#method-i-topic-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="Topic.html">Topic</a></p>

<h3 id="method-i-topic-label-Example">Example<span><a href="#method-i-topic-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud/pubsub&quot;</span>

<span class="ruby-identifier">pubsub</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">pubsub</span>

<span class="ruby-identifier">sub</span> = <span class="ruby-identifier">pubsub</span>.<span class="ruby-identifier">subscription</span> <span class="ruby-string">&quot;my-topic-sub&quot;</span>
<span class="ruby-identifier">sub</span>.<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">name</span> <span class="ruby-string">&quot;projects/my-project/topics/my-topic&quot;</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="topic-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/pubsub/subscription.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">topic</span>
  <span class="ruby-identifier">ensure_gapi!</span>
  <span class="ruby-comment"># Always disable autocreate, we don&#39;t want to recreate a topic that</span>
  <span class="ruby-comment"># was intentionally deleted.</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new_lazy</span> <span class="ruby-ivar">@gapi</span>[<span class="ruby-string">&quot;topic&quot;</span>], <span class="ruby-identifier">connection</span>, <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
      </div>
    </div>
  



        
      </section>

      <nav class="side-nav">
        
<div class="side-nav--meta">
  <div id="doc-build-date">
    Docs built on Jul 16, 2015.
  </div>
</div>

<ul>
  <li class="toc-l0"><a class="reference internal" href="../../index.html">Overview</a></li>
</ul>

<ul>

    <li class="toc-l0">
      <a class="reference internal" href="../../Gcloud.html">
        Gcloud
      </a>
    </li>

    <li class="toc-l0">
      <a class="reference internal" href="../Datastore.html">
        Datastore
      </a>
    </li>

    <li class="toc-l1">
      <a class="reference internal" href="../Datastore/Dataset.html">
        Dataset
      </a>
    </li>

    <li class="toc-l1">
      <a class="reference internal" href="../Datastore/Query.html">
        Query
      </a>
    </li>

    <li class="toc-l1">
      <a class="reference internal" href="../Datastore/Entity.html">
        Entity
      </a>
    </li>

    <li class="toc-l1">
      <a class="reference internal" href="../Datastore/Key.html">
        Key
      </a>
    </li>

    <li class="toc-l0">
      <a class="reference internal" href="../Pubsub.html">
        Pub/Sub
      </a>
    </li>

    <li class="toc-l1">
      <a class="reference internal" href="Project.html">
        Project
      </a>
    </li>

    <li class="toc-l1">
      <a class="reference internal" href="Topic.html">
        Topic
      </a>
    </li>

    <li class="toc-l1">
      <a class="reference internal current" href="Subscription.html">
        Subscription
      </a>
    </li>

    <li class="toc-l0">
      <a class="reference internal" href="../Storage.html">
        Storage
      </a>
    </li>

    <li class="toc-l1">
      <a class="reference internal" href="../Storage/Project.html">
        Project
      </a>
    </li>

    <li class="toc-l1">
      <a class="reference internal" href="../Storage/Bucket.html">
        Bucket
      </a>
    </li>

    <li class="toc-l1">
      <a class="reference internal" href="../Storage/File.html">
        File
      </a>
    </li>

  <li class="toc-l0"><a class="reference internal" href="../../reference.html">API Reference</a></li>

  <li class="toc-l0"><a class="reference internal" href="../../AUTHENTICATION.md">Authentication Guide</a></li>

  <li class="toc-l0"><a class="reference internal" href="../../CHANGELOG.md">Release History</a></li>

</ul>

<ul class="external-links">
  <li>
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby" title="Github repository">
      <img src="/gcloud-ruby/img/icon-link-github.svg" alt="Github icon">
      Github
    </a>
  </li>
  <li>
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues" title="Issues on Github">
      <img src="/gcloud-ruby/img/icon-link-github.svg" alt="Github icon">
      Issues
    </a>
  </li>
  <li>
    <a href="http://stackoverflow.com/questions/tagged/gcloud-ruby" title="gcloud on StackOverflow">
      <img src="/gcloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon">
      StackOverflow
    </a>
  </li>
  <li>
    <a href="http://rubygems.org/gems/gcloud" title="RubyGems" class="ext-link">
       <img src="/gcloud-ruby/img/icon-link-package-manager.svg" alt="Package Manager icon">
      RubyGems
    </a>
  </li>
</ul>

      </nav>

    </article>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script ="/gcloud-ruby/js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="/gcloud-ruby/js/plugins.js"></script>
<script src="/gcloud-ruby/js/main.js"></script>

<script>
  (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-49880327-13');ga('send','pageview');
</script>


  </body>
</html>
