<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Gcloud::Search::Index &mdash; Gcloud Documentation</title>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/gcloud-ruby/css/normalize.css">
<link rel="stylesheet" href="/gcloud-ruby/css/main.css">
<script src="/gcloud-ruby/js/vendor/modernizr-2.6.2.min.js"></script>
<link href='//fonts.googleapis.com/css?family=Droid+Sans+Mono|Roboto:300,400,700,700italic,400italic|Open+Sans:300' rel='stylesheet' type='text/css'>
<link rel="shortcut icon" href="https://cloud.google.com/images/gcp-favicon.ico">

  </head>

  <body class="lang-page">
    <!--[if lt IE 7]>
  <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

<header class="page-header fixed" role="banner">
  <h1 class="logo">
    <a href="/gcloud-ruby/" title="back to home">
      <img src="/gcloud-ruby/img/logo.svg" alt="Google Cloud Platform">
      <span class="gcloud">gcloud</span>
    </a>
  </h1>

  <nav class="main-nav">
    <div class="nav-current">Ruby</div>
    <ul class="menu">
      <li>
        <a href="/gcloud-java/" title="gcloud-java">
          <img src="/gcloud-ruby/img/icon-lang-java.svg" alt="Java icon" class="menu-icon" />
          Java
        </a>
      </li>
      <li>
        <a href="/gcloud-node/#/docs" title="gcloud-node">
          <img src="/gcloud-ruby/img/icon-lang-nodejs.svg" alt="Node.js icon" class="menu-icon">
          Node.js
        </a>
      </li>
      <li>
        <a href="/gcloud-python/latest/" title="gcloud-python">
          <img src="/gcloud-ruby/img/icon-lang-python.svg" alt="Python icon" class="menu-icon">
          Python
        </a>
      </li>
      <li>
        <a href="/gcloud-ruby/" title="gcloud-ruby">
          <img src="/gcloud-ruby/img/icon-lang-ruby.svg" alt="Ruby icon" class="menu-icon" width="24">
          Ruby
        </a>
      </li>
    </ul>
  </nav>

  <div class="github-issue">
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/new?title=%5BDocumentation+Issue%5D+" target="_blank" class="v-btn">
      <img src="/gcloud-ruby/img/icon-link-github.svg" />
      Report an Issue
    </a>
  </div>
</header>


    <article class="main lang-page" role="main">

      <header class="docs-header">
        <h1 class="page-title">Gcloud::Search::Index</h1>
      </header>

      <section class="content">

        <div id="description" class="description">
          
<h1 id="class-Gcloud::Search::Index-label-Index"><a href="Index.html">Index</a><span><a href="#class-Gcloud::Search::Index-label-Index">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>An index manages <a href="Document.html">Document</a> instances for
retrieval. Indexes cannot be created, updated, or deleted directly on the
server: They are derived from the documents that reference them. You can
manage groups of documents by putting them into separate indexes.</p>

<p>With an index, you can retrieve documents with <a
href="Index.html#method-i-find">find</a> and <a
href="Index.html#method-i-documents">documents</a>; manage them with <a
href="Index.html#method-i-document">document</a>, <a
href="Index.html#method-i-save">save</a>, and <a
href="Index.html#method-i-remove">remove</a>; and perform searches over
their fields with <a href="Index.html#method-i-search">search</a>.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;books&quot;</span>

<span class="ruby-identifier">results</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">search</span> <span class="ruby-string">&quot;dark stormy&quot;</span>
<span class="ruby-identifier">results</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">result</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">doc_id</span>
<span class="ruby-keyword">end</span>
</pre>

<p>For more information, see <a
href="https://cloud.google.com/search/documents_indexes">Documents and
Indexes</a>.</p>

        </div>

        <div class="section-links">
  
    <div>
      Parent:
      
        Object
      
    </div>
  

  

  
    
      <div>
         Methods:

        
        

        
        
            
              <a href="#method-i-atom_fields">atom_fields</a>
            
              <a href="#method-i-datetime_fields">datetime_fields</a>
            
              <a href="#method-i-delete">delete</a>
            
              <a href="#method-i-document">document</a>
            
              <a href="#method-i-documents">documents</a>
            
              <a href="#method-i-field_names">field_names</a>
            
              <a href="#method-i-field_types_for">field_types_for</a>
            
              <a href="#method-i-find">find</a>
            
              <a href="#method-i-geo_fields">geo_fields</a>
            
              <a href="#method-i-get">get</a>
            
              <a href="#method-i-html_fields">html_fields</a>
            
              <a href="#method-i-index_id">index_id</a>
            
              <a href="#method-i-number_fields">number_fields</a>
            
              <a href="#method-i-remove">remove</a>
            
              <a href="#method-i-save">save</a>
            
              <a href="#method-i-search">search</a>
            
              <a href="#method-i-text_fields">text_fields</a>
            
          
        

      </div>
    
  
</div>


        
          
            <h2 id="5Buntitled-5D"> Methods</h2>












    <div id="public-instance-methods" class="section">
      <h3 class="section-header">Public Instance Methods</h3>

      <div class="methods">
        
          <div id="atom_fields-method" class="method ">
  <a name="method-i-atom_fields"></a>

  
    <h4>
      <code>atom_fields()</code>
      <span>
        <a href="#method-i-atom_fields">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The names of fields in which ATOM values are stored. See <a
href="https://cloud.google.com/search/documents_indexes#index_schemas">Index
schemas </a>.</p>
    

    
      <!-- <div class="method-source-code" id="atom_fields-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">atom_fields</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>][<span class="ruby-string">&quot;atomFields&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>]
  []
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="datetime_fields-method" class="method ">
  <a name="method-i-datetime_fields"></a>

  
    <h4>
      <code>datetime_fields()</code>
      <span>
        <a href="#method-i-datetime_fields">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The names of fields in which DATE values are stored. See <a
href="https://cloud.google.com/search/documents_indexes#index_schemas">Index
schemas </a>.</p>
    

    
      <!-- <div class="method-source-code" id="datetime_fields-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 103</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">datetime_fields</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>][<span class="ruby-string">&quot;dateFields&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>]
  []
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="delete-method" class="method ">
  <a name="method-i-delete"></a>

  
    <h4>
      <code>delete(force: false)</code>
      <span>
        <a href="#method-i-delete">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Permanently deletes the index by deleting its documents. (Indexes cannot be
created, updated, or deleted directly on the server: They are derived from
the documents that reference them.)</p>

<h3 id="method-i-delete-label-Parameters">Parameters<span><a href="#method-i-delete-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>force</code>
<dd>
<p>If <code>true</code>, ensures the deletion of the index by first deleting
all documents. If <code>false</code> and the index contains documents, the
request will fail. Default is <code>false</code>. (<code>Boolean</code>)</p>
</dd></dl>

<h3 id="method-i-delete-label-Examples">Examples<span><a href="#method-i-delete-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;books&quot;</span>
</pre>

<p>An index containing documents can be forcefully deleted with the
<code>force</code> option:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;books&quot;</span>
<span class="ruby-identifier">index</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">force</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="delete-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 401</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete</span> <span class="ruby-identifier">force</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">docs_to_be_removed</span> = <span class="ruby-identifier">documents</span> <span class="ruby-identifier">view</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;ID_ONLY&quot;</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">docs_to_be_removed</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-string">&quot;Unable to delete because documents exist. Use force option.&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">while</span> <span class="ruby-identifier">docs_to_be_removed</span>
    <span class="ruby-identifier">docs_to_be_removed</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">remove</span> <span class="ruby-identifier">d</span> }
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">docs_to_be_removed</span>.<span class="ruby-identifier">next?</span>
      <span class="ruby-identifier">docs_to_be_removed</span> = <span class="ruby-identifier">documents</span> <span class="ruby-identifier">token</span><span class="ruby-operator">:</span> <span class="ruby-identifier">docs_to_be_removed</span>.<span class="ruby-identifier">token</span>,
                                     <span class="ruby-identifier">view</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;ID_ONLY&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">docs_to_be_removed</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="document-method" class="method ">
  <a name="method-i-document"></a>

  
    <h4>
      <code>document(doc_id = nil, rank = nil)</code>
      <span>
        <a href="#method-i-document">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Helper for creating a new <a href="Document.html">Document</a> instance.
The returned instance is local: It is either not yet saved to the service
(see <a href="Index.html#method-i-save">save</a>), or if it has been given
the id of an existing document, it is not yet populated with the
document&#39;s data (see <a href="Index.html#method-i-find">find</a>).</p>

<h3 id="method-i-document-label-Parameters">Parameters<span><a href="#method-i-document-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>doc_id</code>
<dd>
<p>The unique identifier of the new document. This is optional. When the
document is saved, this value must contain only visible, printable ASCII
characters (ASCII codes 33 through 126 inclusive) and be no longer than 500
characters. It cannot begin with an exclamation point (<code>!</code>), and
it cannot begin and end with double underscores (<code>__</code>).
(<code>String</code>)</p>
</dd><dt><code>rank</code>
<dd>
<p>The rank of the new document. This is optional. A positive integer which
determines the default ordering of documents returned from a search. It is
a bad idea to assign the same rank to many documents, and the same rank
should never be assigned to more than 10,000 documents. By default (when it
is not specified or set to 0), it is set at the time the document is saved
to the number of seconds since January 1, 2011. The rank can be used in the
<code>expressions</code>, <code>order</code>, and <code>fields</code>
options in <a href="Index.html#method-i-search">search</a>, where it should
referenced as <code>rank</code>. (<code>Integer</code>)</p>
</dd></dl>

<h3 id="method-i-document-label-Returns">Returns<span><a href="#method-i-document-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="Document.html">Gcloud::Search::Document</a></p>

<h3 id="method-i-document-label-Example">Example<span><a href="#method-i-document-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;products&quot;</span>

<span class="ruby-identifier">document</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">document</span> <span class="ruby-string">&quot;product-sku-000001&quot;</span>
<span class="ruby-identifier">document</span>.<span class="ruby-identifier">doc_id</span> <span class="ruby-comment">#=&gt; nil</span>
<span class="ruby-identifier">document</span>.<span class="ruby-identifier">rank</span> <span class="ruby-comment">#=&gt; nil</span>
</pre>

<p>To check if an index already contains a document with the same id, pass the
instance to <a href="Index.html#method-i-find">find</a>:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;products&quot;</span>

<span class="ruby-identifier">document</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">document</span> <span class="ruby-string">&quot;product-sku-000001&quot;</span>
<span class="ruby-identifier">document</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">document</span> <span class="ruby-comment"># returns nil if not present</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="document-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">document</span> <span class="ruby-identifier">doc_id</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">rank</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">d</span>.<span class="ruby-identifier">doc_id</span> = <span class="ruby-identifier">doc_id</span>
    <span class="ruby-identifier">d</span>.<span class="ruby-identifier">rank</span> = <span class="ruby-identifier">rank</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="documents-method" class="method ">
  <a name="method-i-documents"></a>

  
    <h4>
      <code>documents(token: nil, max: nil, view: nil)</code>
      <span>
        <a href="#method-i-documents">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Retrieves the list of documents belonging to the index.</p>

<h3 id="method-i-documents-label-Parameters">Parameters<span><a href="#method-i-documents-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>token</code>
<dd>
<p>A previously-returned page token representing part of the larger set of
results to view. (<code>String</code>)</p>
</dd><dt><code>max</code>
<dd>
<p>Maximum number of documents to return. The default is <code>100</code>.
(<code>Integer</code>)</p>
</dd></dl>

<h3 id="method-i-documents-label-Returns">Returns<span><a href="#method-i-documents-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Array of <a href="Document.html">Gcloud::Search::Document</a> (See <a
href="Document/List.html">Gcloud::Search::Document::List</a>)</p>

<h3 id="method-i-documents-label-Examples">Examples<span><a href="#method-i-documents-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;products&quot;</span>

<span class="ruby-identifier">documents</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">documents</span>
<span class="ruby-identifier">documents</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">index</span>.<span class="ruby-identifier">index_id</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you have a significant number of documents, you may need to paginate
through them: (See <a
href="Document/List.html">Gcloud::Search::Document::List</a>)</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;products&quot;</span>

<span class="ruby-identifier">documents</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">documents</span>
<span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">documents</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-identifier">index</span>.<span class="ruby-identifier">index_id</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">break</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">documents</span>.<span class="ruby-identifier">next?</span>
  <span class="ruby-identifier">documents</span> = <span class="ruby-identifier">documents</span>.<span class="ruby-identifier">next</span>
<span class="ruby-keyword">end</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="documents-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 288</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">documents</span> <span class="ruby-identifier">token</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">max</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">view</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">options</span> = { <span class="ruby-identifier">token</span><span class="ruby-operator">:</span> <span class="ruby-identifier">token</span>, <span class="ruby-identifier">max</span><span class="ruby-operator">:</span> <span class="ruby-identifier">max</span>, <span class="ruby-identifier">view</span><span class="ruby-operator">:</span> <span class="ruby-identifier">view</span> }
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">list_docs</span> <span class="ruby-identifier">index_id</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Document</span><span class="ruby-operator">::</span><span class="ruby-constant">List</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>, <span class="ruby-keyword">self</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
  <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="field_names-method" class="method ">
  <a name="method-i-field_names"></a>

  
    <h4>
      <code>field_names()</code>
      <span>
        <a href="#method-i-field_names">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The names of all the fields that are stored on the index.</p>
    

    
      <!-- <div class="method-source-code" id="field_names-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 126</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">field_names</span>
  (<span class="ruby-identifier">text_fields</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">html_fields</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">atom_fields</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">datetime_fields</span> <span class="ruby-operator">+</span>
    <span class="ruby-identifier">number_fields</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">geo_fields</span>).<span class="ruby-identifier">uniq</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="field_types_for-method" class="method ">
  <a name="method-i-field_types_for"></a>

  
    <h4>
      <code>field_types_for(name)</code>
      <span>
        <a href="#method-i-field_types_for">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The field value types that are stored on the field name.</p>
    

    
      <!-- <div class="method-source-code" id="field_types_for-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 133</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">field_types_for</span> <span class="ruby-identifier">name</span>
  {
    <span class="ruby-identifier">text</span><span class="ruby-operator">:</span> <span class="ruby-identifier">text_fields</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>),
    <span class="ruby-identifier">html</span><span class="ruby-operator">:</span> <span class="ruby-identifier">html_fields</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>),
    <span class="ruby-identifier">atom</span><span class="ruby-operator">:</span> <span class="ruby-identifier">atom_fields</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>),
    <span class="ruby-identifier">datetime</span><span class="ruby-operator">:</span> <span class="ruby-identifier">datetime_fields</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>),
    <span class="ruby-identifier">number</span><span class="ruby-operator">:</span> <span class="ruby-identifier">number_fields</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>),
    <span class="ruby-identifier">geo</span><span class="ruby-operator">:</span> <span class="ruby-identifier">geo_fields</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>)
  }.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">_k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">v</span> }.<span class="ruby-identifier">keys</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="find-method" class="method ">
  <a name="method-i-find"></a>

  
    <h4>
      <code>find(doc_id)</code>
      <span>
        <a href="#method-i-find">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Retrieves an existing document by id.</p>

<h3 id="method-i-find-label-Parameters">Parameters<span><a href="#method-i-find-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>doc_id</code>
<dd>
<p>The id of a document or a <a href="Document.html">Document</a> instance.
(<code>String</code> or <a href="Document.html">Document</a>)</p>
</dd></dl>

<h3 id="method-i-find-label-Returns">Returns<span><a href="#method-i-find-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="Document.html">Gcloud::Search::Document</a> or <code>nil</code> if
the document does not exist</p>

<h3 id="method-i-find-label-Example">Example<span><a href="#method-i-find-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;products&quot;</span>

<span class="ruby-identifier">document</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">find</span> <span class="ruby-string">&quot;product-sku-000001&quot;</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">document</span>.<span class="ruby-identifier">doc_id</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="find-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find</span> <span class="ruby-identifier">doc_id</span>
  <span class="ruby-comment"># Get the id if passes a Document object</span>
  <span class="ruby-identifier">doc_id</span> = <span class="ruby-identifier">doc_id</span>.<span class="ruby-identifier">doc_id</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">doc_id</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:doc_id</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">get_doc</span> <span class="ruby-identifier">index_id</span>, <span class="ruby-identifier">doc_id</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Document</span>.<span class="ruby-identifier">from_hash</span>(<span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">resp</span>.<span class="ruby-identifier">body</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">status</span> <span class="ruby-operator">==</span> <span class="ruby-value">404</span>
  <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">ParserError</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  
    <div class="aliases">
      Also aliased as: <a href="Index.html#method-i-get">get</a>
    </div>
  

  
</div>

        
          <div id="geo_fields-method" class="method ">
  <a name="method-i-geo_fields"></a>

  
    <h4>
      <code>geo_fields()</code>
      <span>
        <a href="#method-i-geo_fields">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The names of fields in which GEO values are stored. See <a
href="https://cloud.google.com/search/documents_indexes#index_schemas">Index
</a>.</p>
    

    
      <!-- <div class="method-source-code" id="geo_fields-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">geo_fields</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>][<span class="ruby-string">&quot;geoFields&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>]
  []
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="get-method" class="method alias">
  <a name="method-i-get"></a>

  
    <h4>
      <code>get(doc_id)</code>
      <span>
        <a href="#method-i-get">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      
    

    
  </div>

  

  
    <div class="aliases">
      Alias for: <a href="Index.html#method-i-find">find</a>
    </div>
  
</div>

        
          <div id="html_fields-method" class="method ">
  <a name="method-i-html_fields"></a>

  
    <h4>
      <code>html_fields()</code>
      <span>
        <a href="#method-i-html_fields">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The names of fields in which HTML values are stored. See <a
href="https://cloud.google.com/search/documents_indexes#index_schemas">Index
schemas </a>.</p>
    

    
      <!-- <div class="method-source-code" id="html_fields-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">html_fields</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>][<span class="ruby-string">&quot;htmlFields&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>]
  []
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="index_id-method" class="method ">
  <a name="method-i-index_id"></a>

  
    <h4>
      <code>index_id()</code>
      <span>
        <a href="#method-i-index_id">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The index identifier. May be defined by the server or by the client. Must
be unique within the project. It cannot be an empty string. It must contain
only visible, printable ASCII characters (ASCII codes 33 through 126
inclusive) and be no longer than 100 characters. It cannot begin with an
exclamation point (<code>!</code>), and it cannot begin and end with double
underscores (<code>__</code>).</p>
    

    
      <!-- <div class="method-source-code" id="index_id-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">index_id</span>
  <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexId&quot;</span>]
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="number_fields-method" class="method ">
  <a name="method-i-number_fields"></a>

  
    <h4>
      <code>number_fields()</code>
      <span>
        <a href="#method-i-number_fields">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The names of fields in which NUMBER values are stored. See <a
href="https://cloud.google.com/search/documents_indexes#index_schemas">Indexschemas
</a>.</p>
    

    
      <!-- <div class="method-source-code" id="number_fields-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">number_fields</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>][<span class="ruby-string">&quot;numberFields&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>]
  []
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="remove-method" class="method ">
  <a name="method-i-remove"></a>

  
    <h4>
      <code>remove(doc_id)</code>
      <span>
        <a href="#method-i-remove">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Permanently deletes the document from the index.</p>

<h3 id="method-i-remove-label-Parameters">Parameters<span><a href="#method-i-remove-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>doc_id</code>
<dd>
<p>The id of the document. (<code>String</code>)</p>
</dd></dl>

<h3 id="method-i-remove-label-Returns">Returns<span><a href="#method-i-remove-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>true</code> if successful</p>

<h3 id="method-i-remove-label-Example">Example<span><a href="#method-i-remove-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;products&quot;</span>

<span class="ruby-identifier">index</span>.<span class="ruby-identifier">remove</span> <span class="ruby-string">&quot;product-sku-000001&quot;</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="remove-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 362</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove</span> <span class="ruby-identifier">doc_id</span>
  <span class="ruby-comment"># Get the id if passes a Document object</span>
  <span class="ruby-identifier">doc_id</span> = <span class="ruby-identifier">doc_id</span>.<span class="ruby-identifier">doc_id</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">doc_id</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:doc_id</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete_doc</span> <span class="ruby-identifier">index_id</span>, <span class="ruby-identifier">doc_id</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
  <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="save-method" class="method ">
  <a name="method-i-save"></a>

  
    <h4>
      <code>save(document)</code>
      <span>
        <a href="#method-i-save">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Saves a new or existing document to the index. If the document instance is
new and has been given an id (see <a
href="Index.html#method-i-document">document</a>), it will replace an
existing document in the index that has the same unique id.</p>

<h3 id="method-i-save-label-Parameters">Parameters<span><a href="#method-i-save-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>document</code>
<dd>
<p>A <a href="Document.html">Document</a> instance, either new (see <a
href="Index.html#method-i-document">document</a>) or existing (see <a
href="Index.html#method-i-find">find</a>).</p>
</dd></dl>

<h3 id="method-i-save-label-Returns">Returns<span><a href="#method-i-save-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="Document.html">Gcloud::Search::Document</a></p>

<h3 id="method-i-save-label-Example">Example<span><a href="#method-i-save-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;products&quot;</span>

<span class="ruby-identifier">document</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">document</span> <span class="ruby-string">&quot;product-sku-000001&quot;</span>
<span class="ruby-identifier">document</span>.<span class="ruby-identifier">doc_id</span> <span class="ruby-comment">#=&gt; nil</span>
<span class="ruby-identifier">document</span>.<span class="ruby-identifier">rank</span> <span class="ruby-comment">#=&gt; nil</span>

<span class="ruby-identifier">document</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">save</span> <span class="ruby-identifier">document</span>
<span class="ruby-identifier">document</span>.<span class="ruby-identifier">doc_id</span> <span class="ruby-comment">#=&gt; &quot;-2486020449015432113&quot;</span>
<span class="ruby-identifier">document</span>.<span class="ruby-identifier">rank</span> <span class="ruby-comment">#=&gt; 154223228</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="save-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 327</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">save</span> <span class="ruby-identifier">document</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">create_doc</span> <span class="ruby-identifier">index_id</span>, <span class="ruby-identifier">document</span>.<span class="ruby-identifier">to_hash</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-identifier">raw</span> = <span class="ruby-identifier">document</span>.<span class="ruby-identifier">instance_variable_get</span> <span class="ruby-string">&quot;@raw&quot;</span>
    <span class="ruby-identifier">raw</span>.<span class="ruby-identifier">merge!</span> <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">resp</span>.<span class="ruby-identifier">body</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">document</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">ParserError</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="search-method" class="method ">
  <a name="method-i-search"></a>

  
    <h4>
      <code>search(query, expressions: nil, matched_count_accuracy: nil, offset: nil, order: nil, fields: nil, scorer: nil, scorer_size: nil, token: nil, max: nil)</code>
      <span>
        <a href="#method-i-search">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>Runs a search against the documents in the index using the provided query.
For more information see the REST API documentation for <a
href="https://cloud.google.com/search/reference/rest/v1/projects/indexes/search">indexes.search</a>.</p>

<h3 id="method-i-search-label-Parameters">Parameters<span><a href="#method-i-search-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>query</code>
<dd>
<p>The query string in search query syntax. If the query is <code>nil</code>
or empty, all documents are returned. For more information see <a
href="https://cloud.google.com/search/query">Query Strings</a>.
(<code>String</code>)</p>
</dd><dt><code>expressions</code>
<dd>
<p>Customized expressions used in <code>order</code> or <code>fields</code>.
The expression can contain fields in <a href="Document.html">Document</a>,
the built-in fields ( <code>rank</code>, the document <code>rank</code>,
and <code>score</code> if scoring is enabled) and fields defined in
<code>expressions</code>. All field expressions expressed as a
<code>Hash</code> with the keys as the <code>name</code> and the values as
the <code>expression</code>. The expression value can be a combination of
supported functions encoded in the string. Expressions involving number
fields can use the arithmetical operators (+, -, *, /) and the built-in
numeric functions (<code>max</code>, <code>min</code>, <code>pow</code>,
<code>count</code>, <code>log</code>, <code>abs</code>). Expressions
involving geopoint fields can use the <code>geopoint</code> and
<code>distance</code> functions. Expressions for text and html fields can
use the <code>snippet</code> function. (<code>Hash</code>)</p>
</dd><dt><code>matched_count_accuracy</code>
<dd>
<p>Minimum accuracy requirement for <a
href="Result/List.html#attribute-i-matched_count">Gcloud::Search::Result::List#matched_count</a>.
If specified, <code>matched_count</code> will be accurate to at least that
number. For example, when set to 100, any <code>matched_count &lt;=
100</code> is accurate. This option may add considerable latency/expense.
By default (when it is not specified or set to 0), the accuracy is the same
as <code>max</code>. (<code>Integer</code>)</p>
</dd><dt><code>offset</code>
<dd>
<p>Used to advance pagination to an arbitrary result, independent of the
previous results. Offsets are an inefficient alternative to using
<code>token</code>. (Both cannot be both set.) The default is 0.
(<code>Integer</code>)</p>
</dd><dt><code>order</code>
<dd>
<p>A comma-separated list of fields for sorting on the search result,
including fields from <a href="Document.html">Document</a>, the built-in
fields (<code>rank</code> and <code>score</code>), and fields defined in
expressions. The default sorting order is ascending. To specify descending
order for a field, a suffix <code>&quot; desc&quot;</code> should be
appended to the field name. For example: <code>orderBy=&quot;foo
desc,bar&quot;</code>. The default value for text sort is the empty string,
and the default value for numeric sort is 0. If not specified, the search
results are automatically sorted by descending <code>rank</code>. Sorting
by ascending <code>rank</code> is not allowed. (<code>String</code>)</p>
</dd><dt><code>fields</code>
<dd>
<p>The fields to return in the <a href="Result.html">Search::Result</a>
objects. These can be fields from <a href="Document.html">Document</a>, the
built-in fields <code>rank</code> and <code>score</code>, and fields
defined in expressions. The default is to return all fields.
(<code>String</code> or <code>Array</code> of <code>String</code>)</p>
</dd><dt><code>scorer</code>
<dd>
<p>The scoring function to invoke on a search result for this query. If scorer
is not set, scoring is disabled and <code>score</code> is 0 for all
documents in the search result. To enable document relevancy score based on
term frequency, set <code>scorer</code> to <code>:generic</code>.
(<code>String</code> or <code>Symbol</code>)</p>
</dd><dt><code>scorer_size</code>
<dd>
<p>Maximum number of top retrieved results to score. It is valid only when
<code>scorer</code> is set. The default is 100. (<code>Integer</code>)</p>
</dd><dt><code>token</code>
<dd>
<p>A previously-returned page token representing part of the larger set of
results to view. (<code>String</code>)</p>
</dd><dt><code>max</code>
<dd>
<p>Maximum number of results to return per page. (<code>Integer</code>)</p>
</dd></dl>

<h3 id="method-i-search-label-Returns">Returns<span><a href="#method-i-search-label-Returns">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Array of <a href="Result.html">Gcloud::Search::Result</a> (See <a
href="Result/List.html">Gcloud::Search::Result::List</a>)</p>

<h3 id="method-i-search-label-Examples">Examples<span><a href="#method-i-search-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;books&quot;</span>

<span class="ruby-identifier">results</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">search</span> <span class="ruby-string">&quot;dark stormy&quot;</span>
<span class="ruby-identifier">results</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">result</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">doc_id</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you have a significant number of search results, you may need to
paginate through them: (See <a
href="Result/List.html">Gcloud::Search::Result::List</a>)</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;books&quot;</span>

<span class="ruby-identifier">results</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">results</span>
<span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">results</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">result</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">doc_id</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">break</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">results</span>.<span class="ruby-identifier">next?</span>
  <span class="ruby-identifier">results</span> = <span class="ruby-identifier">results</span>.<span class="ruby-identifier">next</span>
<span class="ruby-keyword">end</span>
</pre>

<p>By default, <a href="Result.html">Result</a> objects are sorted by document
rank. For more information see the <a
href="https://cloud.google.com/search/reference/rest/v1/projects/indexes/documents#resource_representation.google.cloudsearch.v1.Document.rank">REST
API documentation for Document.rank</a>.</p>

<p>You can specify how to sort results with the <code>order</code> option. In
the example below, the <code>-</code> character before
<code>avg_review</code> means that results will be sorted in ascending
order by <code>published</code> and then in descending order by
<code>avg_review</code>.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;books&quot;</span>

<span class="ruby-identifier">results</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">search</span> <span class="ruby-string">&quot;dark stormy&quot;</span>, <span class="ruby-identifier">order</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;published, avg_review desc&quot;</span>
<span class="ruby-identifier">documents</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">search</span> <span class="ruby-identifier">query</span> <span class="ruby-comment"># API call</span>
</pre>

<p>You can add computed fields with the <code>expressions</code> option, and
limit the fields that are returned with the <code>fields</code> option:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;products&quot;</span>

<span class="ruby-identifier">results</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">search</span> <span class="ruby-string">&quot;cotton T-shirt&quot;</span>,
                       <span class="ruby-identifier">expressions</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">total_price</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;(price + tax)&quot;</span> },
                       <span class="ruby-identifier">fields</span><span class="ruby-operator">:</span> [<span class="ruby-string">&quot;name&quot;</span>, <span class="ruby-string">&quot;total_price&quot;</span>, <span class="ruby-string">&quot;highlight&quot;</span>]
</pre>

<p>Just as in documents, <a href="Result.html">Result</a> data is accessible
via <a href="Fields.html">Fields</a> methods:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;gcloud&quot;</span>

<span class="ruby-identifier">gcloud</span> = <span class="ruby-constant">Gcloud</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">search</span> = <span class="ruby-identifier">gcloud</span>.<span class="ruby-identifier">search</span>
<span class="ruby-identifier">index</span> = <span class="ruby-identifier">search</span>.<span class="ruby-identifier">index</span> <span class="ruby-string">&quot;products&quot;</span>
<span class="ruby-identifier">document</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">find</span> <span class="ruby-string">&quot;product-sku-000001&quot;</span>
<span class="ruby-identifier">results</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">search</span> <span class="ruby-string">&quot;cotton T-shirt&quot;</span>
<span class="ruby-identifier">values</span> = <span class="ruby-identifier">results</span>[<span class="ruby-value">0</span>][<span class="ruby-string">&quot;description&quot;</span>]

<span class="ruby-identifier">values</span>[<span class="ruby-value">0</span>] <span class="ruby-comment">#=&gt; &quot;100% organic cotton ruby gem T-shirt&quot;</span>
<span class="ruby-identifier">values</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">type</span> <span class="ruby-comment">#=&gt; :text</span>
<span class="ruby-identifier">values</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">lang</span> <span class="ruby-comment">#=&gt; &quot;en&quot;</span>
<span class="ruby-identifier">values</span>[<span class="ruby-value">1</span>] <span class="ruby-comment">#=&gt; &quot;&lt;p&gt;100% organic cotton ruby gem T-shirt&lt;/p&gt;&quot;</span>
<span class="ruby-identifier">values</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">type</span> <span class="ruby-comment">#=&gt; :html</span>
<span class="ruby-identifier">values</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">lang</span> <span class="ruby-comment">#=&gt; &quot;en&quot;</span>
</pre>
    

    
      <!-- <div class="method-source-code" id="search-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 580</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">search</span> <span class="ruby-identifier">query</span>, <span class="ruby-identifier">expressions</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">matched_count_accuracy</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>,
           <span class="ruby-identifier">offset</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">order</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">fields</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">scorer</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>,
           <span class="ruby-identifier">scorer_size</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">token</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">max</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">ensure_connection!</span>
  <span class="ruby-identifier">options</span> = { <span class="ruby-identifier">expressions</span><span class="ruby-operator">:</span> <span class="ruby-identifier">format_expressions</span>(<span class="ruby-identifier">expressions</span>),
              <span class="ruby-identifier">matched_count_accuracy</span><span class="ruby-operator">:</span> <span class="ruby-identifier">matched_count_accuracy</span>,
              <span class="ruby-identifier">offset</span><span class="ruby-operator">:</span> <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">order</span><span class="ruby-operator">:</span> <span class="ruby-identifier">order</span>, <span class="ruby-identifier">fields</span><span class="ruby-operator">:</span> <span class="ruby-identifier">fields</span>,
              <span class="ruby-identifier">scorer</span><span class="ruby-operator">:</span> <span class="ruby-identifier">scorer</span>, <span class="ruby-identifier">scorer_size</span><span class="ruby-operator">:</span> <span class="ruby-identifier">scorer_size</span>, <span class="ruby-identifier">token</span><span class="ruby-operator">:</span> <span class="ruby-identifier">token</span>,
              <span class="ruby-identifier">max</span><span class="ruby-operator">:</span> <span class="ruby-identifier">max</span> }
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">search</span> <span class="ruby-identifier">index_id</span>, <span class="ruby-identifier">query</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">success?</span>
    <span class="ruby-constant">Result</span><span class="ruby-operator">::</span><span class="ruby-constant">List</span>.<span class="ruby-identifier">from_response</span> <span class="ruby-identifier">resp</span>, <span class="ruby-keyword">self</span>, <span class="ruby-identifier">query</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-constant">ApiError</span>.<span class="ruby-identifier">from_response</span>(<span class="ruby-identifier">resp</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
          <div id="text_fields-method" class="method ">
  <a name="method-i-text_fields"></a>

  
    <h4>
      <code>text_fields()</code>
      <span>
        <a href="#method-i-text_fields">&para;</a>
        <a href="#top">&uarr;</a>
      </span>
    </h4>
  

  <div class="method-description">
    
      <p>The names of fields in which TEXT values are stored. See <a
href="https://cloud.google.com/search/documents_indexes#index_schemas">Index
schemas </a>.</p>
    

    
      <!-- <div class="method-source-code" id="text_fields-source">
<pre class="ruby"><span class="ruby-comment"># File lib/gcloud/search/index.rb, line 79</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">text_fields</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>][<span class="ruby-string">&quot;textFields&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@raw</span>[<span class="ruby-string">&quot;indexedField&quot;</span>]
  []
<span class="ruby-keyword">end</span></pre>
      </div> -->
    
  </div>

  

  
</div>

        
      </div>
    </div>
  



          
        
      </section>

      <nav class="side-nav">
        
<div class="side-nav--meta">
  <div id="doc-build-date">
    Docs built on Dec 30, 2015.
  </div>
</div>

<ul>
  <h4 class="list-item--heading">Getting Started</h4>
  <li class="toc-l0"><a class="reference internal" href="../../index.html">Overview</a></li>
  
    <li class="toc-l0"><a class="reference internal" href="../../AUTHENTICATION.md">Authentication Guide</a></li>
  
</ul>

<ul>
  <h4 class="list-item--heading">API</h4>
  
      <li class="toc-l0">
        <a class="reference internal" href="../../Gcloud.html">
          Gcloud
        </a>
      </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Bigquery.html">
          BigQuery
        </a>
      </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Datastore.html">
          Datastore
        </a>
      </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Dns.html">
          DNS
        </a>
      </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Pubsub.html">
          Pub/Sub
        </a>
      </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../ResourceManager.html">
          Resource Manager
        </a>
      </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Search.html">
          Search
        </a>
      </li>
      
        <li class="toc-l1">
          <a class="reference internal" href="Project.html">
            Project
          </a>
        </li>
      
        <li class="toc-l1">
          <a class="reference internal current" href="Index.html">
            Index
          </a>
        </li>
      
        <li class="toc-l1">
          <a class="reference internal" href="Document.html">
            Document
          </a>
        </li>
      
  
      <li class="toc-l0">
        <a class="reference internal" href="../Storage.html">
          Storage
        </a>
      </li>
      
  
  <li class="toc-l0"><a class="reference internal" href="../../reference.html">API Reference</a></li>
</ul>

<ul class="external-links">
  <li>
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby" title="Github repository">
      <img src="/gcloud-ruby/img/icon-link-github.svg" alt="Github icon">
      Github
    </a>
  </li>
  <li>
    <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues" title="Issues on Github">
      <img src="/gcloud-ruby/img/icon-link-issues.svg" alt="Issues icon">
      Issues
    </a>
  </li>
  <li>
    <a href="http://stackoverflow.com/questions/tagged/gcloud-ruby" title="gcloud on StackOverflow">
      <img src="/gcloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon">
      StackOverflow
    </a>
  </li>
  <li>
    <a href="http://rubygems.org/gems/gcloud" title="RubyGems" class="ext-link">
       <img src="/gcloud-ruby/img/icon-link-rubygems.svg" alt="RubyGems icon">
      RubyGems
    </a>
  </li>
</ul>

      </nav>

    </article>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script ="/gcloud-ruby/js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="/gcloud-ruby/js/plugins.js"></script>
<script src="/gcloud-ruby/js/main.js"></script>

<script>
  (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-49880327-13');ga('send','pageview');
</script>


  </body>
</html>
