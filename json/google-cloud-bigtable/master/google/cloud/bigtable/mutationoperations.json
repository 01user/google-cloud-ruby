{"id":"google/cloud/bigtable/mutationoperations","name":"MutationOperations","title":["Google","Cloud","Bigtable","MutationOperations"],"description":"<h1 id=\"mutationoperations\">MutationOperations</h1>\n\n<p>Collection of mutations apis.</p>\n\n<ul>\n  <li>Mutate single row</li>\n  <li>Mutate multiple rows</li>\n  <li>Read modify and write row atomically on the server</li>\n</ul>","source":"google-cloud-bigtable/lib/google/cloud/bigtable/mutation_operations.rb#L34","resources":[],"examples":[],"methods":[{"id":"mutate_row-instance","type":"instance","name":"mutate_row","title":["Google","Cloud","Bigtable","MutationOperations#mutate_row"],"description":"<p>Mutate row.</p>\n\n<p>Mutates a row atomically. Cells already present in the row are left\nunchanged unless explicitly changed by +mutation+.\nChanges to be atomically applied to the specified row. Entries are applied\nin order, meaning that earlier mutations can be masked by later ones.\nMust contain at least one mutation entry and at most 100000.</p>","source":"google-cloud-bigtable/lib/google/cloud/bigtable/mutation_operations.rb#L74","resources":[],"examples":[{"caption":"<p>Single mutation on row.</p>","code":"require \"google/cloud\"\n\nbigtable = Google::Cloud::Bigtable.new\n\ntable = bigtable.table(\"my-instance\", \"my-table\", skip_lookup: true)\n\nentry = table.new_mutation_entry.new(\"user-1\")\nentry.set_cell(\"cf1\", \"field1\", \"XYZ\")\ntable.mutate_row(entry)"},{"caption":"<p>Multiple mutations on row.</p>","code":"require \"google/cloud\"\n\nbigtable = Google::Cloud::Bigtable.new\n\ntable = bigtable.table(\"my-instance\", \"my-table\", skip_lookup: true)\n\nentry = table.new_mutation_entry(\"user-1\")\nentry.set_cell(\n  \"cf-1\",\n  \"field-1\",\n  \"XYZ\"\n  timestamp: Time.now.to_i * 1000 # Time stamp in milli seconds.\n).delete_from_column(\"cf2\", \"field02\")\n\ntable.mutate_row(entry)"}],"params":[{"name":"entry","types":["Google::Cloud::Bigtable::MutationEntry"],"description":"Mutation entry with row key and list of mutations.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"mutate_rows-instance","type":"instance","name":"mutate_rows","title":["Google","Cloud","Bigtable","MutationOperations#mutate_rows"],"description":"<p>Mutates multiple rows in a batch. Each individual row is mutated\natomically as in MutateRow, but the entire batch is not executed\natomically.</p>","source":"google-cloud-bigtable/lib/google/cloud/bigtable/mutation_operations.rb#L108","resources":[],"examples":[{"caption":"","code":"require \"google/cloud\"\n\nbigtable = Google::Cloud::Bigtable.new\n\ntable = bigtable.table(\"my-instance\", \"my-table\", skip_lookup: true)\n\nentries = []\nentries << table.new_mutation_entry.new(\"row-1\").set_cell(\"cf1\", \"field1\", \"XYZ\")\nentries << table.new_mutation_entry.new(\"row-2\").set_cell(\"cf1\", \"field1\", \"ABC\")\ntable.mutate_row(entries)"}],"params":[{"name":"entries","types":["Array<Google::Cloud::Bigtable::MutationEntry>"],"description":"The row keys and corresponding mutations to be applied in bulk.\nEach entry is applied as an atomic mutation, but the entries may be\napplied in arbitrary order (even between entries for the same row).\nAt least one entry must be specified, and in total the entries can\ncontain at most 100000 mutations.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"google/bigtable/v2/mutaterowsresponse/entry\">Google::Bigtable::V2::MutateRowsResponse::Entry</a>&gt;"],"description":""}]},{"id":"read_modify_write_row-instance","type":"instance","name":"read_modify_write_row","title":["Google","Cloud","Bigtable","MutationOperations#read_modify_write_row"],"description":"<p>Modifies a row atomically on the server. The method reads the latest\nexisting timestamp and value from the specified columns and writes a new\nentry based on pre-defined read/modify/write rules. The new value for the\ntimestamp is the greater of the existing timestamp or the current server\ntime. The method returns the new contents of all modified cells.</p>","source":"google-cloud-bigtable/lib/google/cloud/bigtable/mutation_operations.rb#L153","resources":[],"examples":[{"caption":"<p>Apply multiple modification rules.</p>","code":"require \"google/cloud/bigtable\"\n\nbigtable = Google::Cloud::Bigtable.new\ntable = bigtable.table(\"my-instance\", \"my-table\", skip_lookup: true)\n\nrule_1 = table.new_read_modify_write_rule(\"cf\", \"field01\")\nrule_1.append(\"append-xyz\")\n\nrule_2 = table.new_read_modify_write_rule(\"cf\", \"field01\")\nrule_2.increment(1)\n\nrow = table.read_modify_write_row(\"user01\", [rule_1, rule_2])\n\nputs row.cells"},{"caption":"<p>Apply single modification rules.</p>","code":"require \"google/cloud/bigtable\"\n\nbigtable = Google::Cloud::Bigtable.new\ntable = bigtable.table(\"my-instance\", \"my-table\", skip_lookup: true)\n\nrule = table.new_read_modify_write_rule(\"cf\", \"field01\").append(\"append-xyz\")\n\nrow = table.read_modify_write_row(\"user01\", rule)\n\nputs row.cells"}],"params":[{"name":"key","types":["String"],"description":"The key of the row to which the read/modify/write rules should be applied.","optional":false,"nullable":false},{"name":"rules","types":["Google::Cloud::Bigtable::ReadModifyWriteRule","Array<Google::Cloud::Bigtable::ReadModifyWriteRule>"],"description":"Rules specifying how the specified rowâ€™s contents are to be transformed\ninto writes. Entries are applied in order, meaning that earlier rules will\naffect the results of later ones.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigtable/row\">Google::Cloud::Bigtable::Row</a>"],"description":""}]},{"id":"new_mutation_entry-instance","type":"instance","name":"new_mutation_entry","title":["Google","Cloud","Bigtable","MutationOperations#new_mutation_entry"],"description":"<p>Create instance of mutation_entry</p>","source":"google-cloud-bigtable/lib/google/cloud/bigtable/mutation_operations.rb#L196","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigtable\"\n\nbigtable = Google::Cloud::Bigtable.new\ntable = bigtable.table(\"my-instance\", \"my-table\", skip_lookup: true)\n\nentry = table.new_mutation_entry(\"row-key-1\")\n\n# Without row key\nentry = table.new_mutation_entry"}],"params":[{"name":"row_key","types":["String"],"description":"Row key. Optional\nThe key of the row to which the mutation should be applied.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigtable/mutationentry\">Google::Cloud::Bigtable::MutationEntry</a>"],"description":""}]},{"id":"new_read_modify_write_rule-instance","type":"instance","name":"new_read_modify_write_rule","title":["Google","Cloud","Bigtable","MutationOperations#new_read_modify_write_rule"],"description":"<p>Create instance of ReadModifyWriteRule to append or increment value\nof the cell qualifier.</p>","source":"google-cloud-bigtable/lib/google/cloud/bigtable/mutation_operations.rb#L225","resources":[],"examples":[{"caption":"<p>Create rule to append to qualifier value.</p>","code":"require \"google/cloud/bigtable\"\n\nbigtable = Google::Cloud::Bigtable.new\ntable = bigtable.table(\"my-instance\", \"my-table\", skip_lookup: true)\nrule = table.new_read_modify_write_rule(\"cf\", \"qualifier-1\")\nrule.append(\"append-xyz\")"},{"caption":"<p>Create rule to increment qualifier value.</p>","code":"require \"google/cloud/bigtable\"\n\nbigtable = Google::Cloud::Bigtable.new\ntable = bigtable.table(\"my-instance\", \"my-table\", skip_lookup: true)\nrule = table.new_read_modify_write_rule(\"cf\", \"qualifier-1\")\nrule.increment(100)"}],"params":[{"name":"family","types":["String"],"description":"The name of the family to which the read/modify/write should be applied.","optional":false,"nullable":false},{"name":"qualifier","types":["String"],"description":"The qualifier of the column to which the read/modify/write should be","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigtable/readmodifywriterule\">Google::Cloud::Bigtable::ReadModifyWriteRule</a>"],"description":""}]}]}